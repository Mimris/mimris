"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{1457:(e,t,l)=>{l.r(t),l.d(t,{admin:()=>p,core:()=>o,fs:()=>c,gojs:()=>n,params:()=>i,props:()=>r,relkinds:()=>a,types:()=>d,viewkinds:()=>s});let o={AKM_CORE_MM:"AKM-META_MM",AKM_MODELVIEWS:["01-Property","02-EntityType","03-MethodTypes","1-AKM META"]},i={MEMBERSCALE:1},s={OBJ:"Object",AKM:"AkmObject",CONT:"Container",TREE:"Tree",IMAGE:"Image",REL:"Relationship",POOL:"Pool",LANE:"Lane"},a={REL:"Association",GEN:"Generalization",AGGR:"Aggregation",COMP:"Composition"},n={C_BOTTOM:"bottom",C_CONTAINER:"Container",C_DATATYPE:"Datatype",C_ENUMERATION:"Enumeration",C_FIELDTYPE:"Field type",C_GEOMETRY:"Geometry",C_INPUTPATTERN:"Input pattern",C_LEFT:"left",C_LINKEMPLATE:"linkTemplate1",C_METAMODEL:"Metamodel",C_METACONTAINER:"Metacontainer",C_METHOD:"Method",C_METIS:"Metis",C_MODEL:"Model",C_MODELVIEW:"Model view",C_NODETEMPLATE:"textAndIcon",C_AKM_OBJECT:"AKM Object",C_OBJECT:"Object",C_OBJECTTYPE:"Object type",C_OBJECTTYPEVIEW:"Object type view",C_OBJECTTYPEGEO:"Object type geo",C_OBJECTVIEW:"Object view",C_PALETTEGROUP_OBJ:"typeitem",C_PORT:"Port",C_PROPERTY:"Property",C_PROPERTYGROUP:"Property group",C_PROPVALUE:"Property value",C_RELATIONSHIP:"Relationship",C_RELSHIPTYPE:"Relationship type",C_RELSHIPTYPEVIEW:"Relationship type view",C_RELSHIPVIEW:"Relationship view",C_RIGHT:"right",C_TOP:"top",C_UNIT:"Unit",C_UNITCATEGORY:"Unit category",C_VALUE:"Value",C_VIEWFORMAT:"View format",C_VIEWSTYLE:"Viewstyle",C_DATATYPE_STRING:"string",C_DATATYPE_FLOAT:"float",C_DATATYPE_NUMBER:"number",C_DATATYPE_BOOLEAN:"boolean",C_DATATYPE_DATE:"date",C_DATATYPE_TIME:"time",C_DATATYPE_DATETIME:"datetime",C_DATATYPE_DURATION:"duration",C_DATATYPE_EMAIL:"email",C_DATATYPE_URL:"url",C_DATATYPE_PHONE:"phone",C_DATATYPE_FILE:"file",C_DATATYPE_PASSWORD:"password",C_DATATYPE_TEXT:"text",C_DATATYPE_STRING_PATTERN:"",C_DATATYPE_INTEGER_PATTERN:"%d",C_DATATYPE_FLOAT_PATTERN:"^[+-]?([0-9]+([.][0-9]*)?|[.][0-9]+)$",C_DATATYPE_NUMBER_PATTERN:"^[+-]?([0-9]+([.][0-9]*)?|[.][0-9]+)$",C_DATATYPE_BOOLEAN_PATTERN:"[0-1",C_DATATYPE_DATE_PATTERN:"",C_DATATYPE_TIME_PATTERN:"/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/",C_DATATYPE_DATETIME_PATTERN:"",C_DATATYPE_EMAIL_PATTERN:"",C_DATATYPE_URL_PATTERN:"",C_DATATYPE_PHONE_PATTERN:"",C_DATATYPE_FILE_PATTERN:"",C_DATATYPE_PASSWORD_PATTERN:"",C_DATATYPE_TEXT_PATTERN:"",C_VIEWFORMAT_TEXT:"%s",C_VIEWFORMAT_TEXTAREA:"%s",C_VIEWFORMAT_CHECKBOX:"checkbox",C_VIEWFORMAT_RADIO:"",C_VIEWFORMAT_SELECT:"select",C_VIEWFORMAT_DATE:"%s",C_VIEWFORMAT_TIME:"time",C_VIEWFORMAT_DATETIME:"datetime",C_VIEWFORMAT_EMAIL:"email",C_VIEWFORMAT_URL:"url",C_VIEWFORMAT_PHONE:"phone",C_VIEWFORMAT_FILE:"file",C_VIEWFORMAT_PASSWORD:"password",C_VIEWFORMAT_NUMBER:"%f",C_VIEWFORMAT_INTEGER:"%d",C_VIEWFORMAT_FLOAT:"%f",C_VIEWFORMAT_BOOLEAN:"boolean",C_PORT_COLOR:"lightgrey"},d={AKM_ELEMENT:"Element",AKM_METAMODEL:"Metamodel",AKM_MODEL:"Model",AKM_COLLECTION:"Collection",AKM_CONTAINER:"Container",AKM_ENTITY_TYPE:"EntityType",AKM_RELSHIP_TYPE:"RelshipType",AKM_INFORMATION:"Information",AKM_PORT:"Port",AKM_ROLE:"Role",AKM_TASK:"Task",AKM_VIEW:"View",AKM_PRODUCT:"Product",AKM_ORGANISATION:"Organisation",AKM_PROCESS:"Process",AKM_SYSTEM:"System",AKM_PROPERTY:"Property",AKM_PROPERTYGROUP:"PropertyGroup",AKM_METHOD:"Method",AKM_METHODTYPE:"MethodType",AKM_DATATYPE:"Datatype",AKM_VALUE:"Value",AKM_INPUTPATTERN:"InputPattern",AKM_VIEWFORMAT:"ViewFormat",AKM_FIELDTYPE:"Fieldtype",AKM_UNIT:"Unit",AKM_LABEL:"Label",AKM_GENERIC:"Generic",AKM_OSDUTYPE:"OSDUType",AKM_CONTAINS:"contains",AKM_ANNOTATES:"annotates",AKM_HAS_COLLECTION:"has",AKM_HAS_MEMBER:"hasMember",AKM_HAS_PART:"hasPart",AKM_HAS_PORT:"hasPort",AKM_HAS_PROPERTY:"has",AKM_HAS_PROPERTIES:"hasContent",AKM_HAS_PROPERTYGROUP:"has",AKM_HAS_SUBMODEL:"hasSub",AKM_HAS_SUBMETAMODEL:"hasSub",AKM_HAS_VIEWSTYLE:"has",AKM_RELATIONSHIP_TYPE:"relationshipType",AKM_IS:"Is",AKM_IS_OF_DATATYPE:"isOf",AKM_IS_DEFAULTVALUE:"isDefault",AKM_HAS_METHOD:"has",AKM_HAS_ALLOWED_VALUE:"hasAllowed",AKM_HAS_INPUTPATTERN:"has",AKM_HAS_VIEWFORMAT:"has",AKM_HAS_FIELDTYPE:"has",AKM_POINTS_TO:"pointsTo",AKM_REFERS_TO:"refersTo",AKM_GENERIC_REL:"generic",OBJECTTYPE_ID:"objecttype",OBJECTTYPE:"Object type",OBJECTTYPE_NAME:"Object type",OBJECTTYPE_DESC:"",CONTAINERTYPE_NAME:"Container type",RELATIONSHIPTYPE_ID:"relationshiptype",RELATIONSHIPTYPE:"Relationship type",RELATIONSHIPTYPE_NAME:"My Relationship type",RELATIONSHIPTYPE_DESC:"",MTD_TRAVERSE:"Traverse",MTD_CALCULATEVALUE:"CalculateValue",MTD_AGGREGATEVALUE:"AggregateValue",MTD_GETCONNECTEDOBJECT:"GetConnectedObject",EKA_ELEMENT:"EKA Element",EKA_SPACE:"EKA Space",EKA_OBJECT:"EKA Object",EKA_PROPERTY:"EKA Property",EKA_METHOD:"EKA Method",EKA_ROLE:"EKA Role",EKA_ORIGIN:"Origin",EKA_TARGET:"Target",EKA_RELATIONSHIP:"Relationship",EKA_MEMBER:"Member",EKA_PART:"Part",EKA_DEPENDS_ON:"Depends on",EKA_IS:"Is",EKA_IS_A:"Is a",_EKA_IS:"_is",_EKA_MEMBER:"_member",_EKA_PART:"_part"},r={DRAFT:"proposedType"},c={FS_C_CATEGORIES:"categories",FS_C_DATATYPES:"datatypes",FS_C_ENUMERATIONS:"enumerations",FS_C_METAMODELS:"metamodels",FS_C_MODELS:"models",FS_C_MODELVIEWS:"modelviews",FS_C_OBJECTS:"objects",FS_C_OBJECTTYPES:"objecttypes",FS_C_OBJECTTYPEVIEWS:"objecttypeviews",FS_C_OBJTYPEGEOS:"objtypegeos",FS_C_OBJECTVIEWS:"objectviews",FS_C_PROPERTIES:"properties",FS_C_METHODS:"methods",FS_C_RELATIONSHIPS:"relationships",FS_C_RELSHIPTYPES:"relationshiptypes",FS_C_RELSHIPTYPEVIEWS:"relationshiptypeviews",FS_C_RELSHIPVIEWS:"relationshipviews",FS_C_TYPES:"types",FS_C_UNITS:"units",FS_C_PROPVALUES:"propertyvalues",FS_C_VALUES:"values"},p={AKM_ADMIN_MM:"AKM-ADMIN_MM",AKM_ADMIN_MODEL:"_ADMIN_MODEL",AKM_ADMIN_MODELVIEW:"_ADMIN",AKM_ADMIN_GOMODEL:"_ADMIN_GOMODEL",AKM_PROJECT:"Project",AKM_MODELSUITE:"ModelSuite",AKM_METAMODEL:"Metamodel",AKM_MODEL:"Model",AKM_MODELVIEW:"Modelview",AKM_INSTANCES_MODEL:"_INSTANCES_MODEL",AKM_HAS_METAMODEL:"has",AKM_HAS_MODEL:"has",AKM_HAS_MODELVIEW:"has",AKM_REFERSTO_METAMODEL:"refersTo",AKM_GENERATEDFROM_MODEL:"generatedFrom",AKM_PROP_METAMODEL_ID:"metamodelId",AKM_PROP_MODEL_ID:"modelId",AKM_PROP_MODELVIEW_ID:"modelviewId"}},1910:(e,t,l)=>{l.d(t,{A:()=>i});var o=l(7876);let i=e=>{let{label:t,value:l,onChange:i,options:s}=e;return(0,o.jsxs)("div",{children:[t,(0,o.jsx)("select",{value:l,onChange:e=>i(e.target.value),children:s.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]})}},2588:(e,t,l)=>{l.d(t,{EL:()=>h,Ip:()=>v,Mu:()=>x,NF:()=>a,PO:()=>j,PT:()=>u,UD:()=>f,WC:()=>c,XR:()=>i,YX:()=>T,Zr:()=>m,_N:()=>p,by:()=>s,fJ:()=>E,gj:()=>r,jQ:()=>y,kf:()=>b,nh:()=>g,y9:()=>n,zI:()=>A}),l(1457);let o=!1;function i(){return o=!o}let s=e=>{let t=!1;return null==e?t=!0:0==e.length&&(t=!0),t},a=(e,t)=>{for(let l=0;l<e.length;l++)if(e[l]===t)return!0;return!1},n=e=>{let t=!0;return null==e?t=!1:""===e&&(t=!1),t},d=()=>((1+Math.random())*65536|0).toString(16).substring(1),r=()=>(d()+d()+"-"+d()+"-4"+d().substr(0,3)+"-"+d()+"-"+d()+d()+d()).toLowerCase(),c=(e,t)=>{for(let l=0;l<e.length;l++){let o=e[l];if(n(o)){let i=null==o?void 0:o.id;if(i||(i=null==o?void 0:o.key),i===t){e.splice(l,1);break}}}};function p(e,t){let l=new Set(e),o=new Set(t);return[...l].filter(e=>o.has(e))}function u(e){return null==e?void 0:e.replace(/\W+(.)/g,function(e,t){return t.toUpperCase()})}function m(e){return(null==e?void 0:e.charAt(0).toUpperCase())+(null==e?void 0:e.slice(1))}function h(e){return[...new Set(e)]}function v(e,t){return[...new Map(e.map(e=>[e[t],e])).values()]}function f(e,t){return e.name<t.name?-1:+(e.name>t.name)}function b(e){return"number"==typeof e}function A(e,t,l){let o=t.find(e=>e.name===l&&e);return e.filter(e=>e.typeRef===(null==o?void 0:o.id)&&e)}function j(e,t){return e.find(e=>e.name===t&&e)}function E(e,t){return e.find(e=>e.name.split(".")[0]===t&&e)}function g(e,t){return e.find(e=>e.name===t&&e)}function x(e,t,l,o){let i=null==o?void 0:o.filter(t=>t.toobjectRef===e.id&&t),s=null==l?void 0:l.find(e=>{var t;return e.id===(null===(t=i[0])||void 0===t?void 0:t.fromobjectRef)}),a=null==o?void 0:o.filter(e=>e.toobjectRef===(null==s?void 0:s.id)&&e),n=a[0]&&(null==l?void 0:l.find(e=>e.id===a[0].fromobjectRef));return s||n}function y(e,t,l){return t?null==e?void 0:e.find(e=>e.toobjectRef===t&&e.typeRef===l):null}function T(e,t,l,o){return l&&t?null==e?void 0:e.find(e=>e.fromobjectRef===t&&e.toobjectRef===l&&e.typeRef===o):null}},3278:(e,t,l)=>{l.d(t,{A:()=>A});var o=l(7876),i=l(4250),s=l.n(i),a=l(4232),n=l(3060),d=l(3172),r=l(1445),c=l(8466),p=l(5554),u=l(1777),m=l(4631),h=l(4797),v=l(1423);let f=e=>{var t,l,o,i,s,a;console.log("8 SaveNewModel props",e);let n=null==e?void 0:null===(l=e.phData)||void 0===l?void 0:null===(t=l.metis)||void 0===t?void 0:t.models,d=null==e?void 0:null===(i=e.phData)||void 0===i?void 0:null===(o=i.metis)||void 0===o?void 0:o.metamodels,r=null==n?void 0:n.find(t=>{var l,o;return t.id===(null==e?void 0:null===(o=e.phFocus)||void 0===o?void 0:null===(l=o.focusModel)||void 0===l?void 0:l.id)}),c=null==r?void 0:null===(s=r.modelviews)||void 0===s?void 0:s.find(t=>{var l,o;return t.id===(null==e?void 0:null===(o=e.phFocus)||void 0===o?void 0:null===(l=o.focusModelview)||void 0===l?void 0:l.id)}),p=null==d?void 0:d.find(e=>e.id===(null==r?void 0:r.metamodelRef));console.log("23 CreateNewModel",r,c,p);let u=null==r?void 0:null===(a=r.objects)||void 0===a?void 0:a.filter(e=>"Metamodel"===e.typeName),m=null==c?void 0:c.objectviews.find(e=>null==u?void 0:u.map(e=>e.id).includes(e.objectRef));console.log("28 CreateNewModel",m);let h=null==d?void 0:d.find(e=>e.name===(null==m?void 0:m.name));if(console.log("31 CreateNewModel",h),!h)return null;let f=(()=>{let t=(null==h?void 0:h.name)==="AKM-Core_MM"?"".concat(null==h?void 0:h.name.slice(0,-3),"-Template"):"AKM-IRTV_MM"===h.name?"".concat(null==h?void 0:h.name.slice(0,-3),"-Template"):"AKM-POPS_MM"===h.name?"".concat(null==h?void 0:h.name.slice(0,-3),"-Template"):"AKM-OSDU_MM"===h.name?"".concat(null==h?void 0:h.name.slice(0,-3),"-Template"):"".concat(null==h?void 0:h.name.slice(0,-3),"-Modelling-Template"),l=(null==h?void 0:h.name)==="AKM-Core_MM"?"01-Typedef_META":"AKM-IRTV_MM"===h.name?"01-Concept_IRTV":"AKM-POPS_MM"===h.name?"01-Overview_POPS":"AKM-OSDU_MM"===h.name?"01-OSDU-Typedef_META":"Basic-Models_META",o=(null==h?void 0:h.name)==="AKM-Core_MM"?"Type Definition Model, modeling with the EntityTypes":(null==h?void 0:h.name)==="AKM-IRTV_MM"?"Concept Model, modeling based on IRTV (Information, Roles, Tasks, Views)":(null==h?void 0:h.name)==="AKM-POPS_MM"?"Overview Model, modeling based on POPS (Products, Organisations, Processes, Systems)":(null==h?void 0:h.name)==="AKM-OSDU_MM"?"OSDU EntityType Model, modeling with the OSDU EntityTypes based on AKM-OSDU_MM Metamodel and OSDU Schema Model":"Model based on"+(null==h?void 0:h.name)+" Metamodel",i=h&&{id:(0,v.A)(),name:l,description:o,metamodelRef:null==h?void 0:h.id,sourceMetamodelRef:"",targetMetamodelRef:"",targetModelRef:"",includeSystemtypes:!1,isTemplate:!1,templates:[],objects:[],relships:[],modelviews:[{id:(0,v.A)(),name:"0-Main",description:"Main view",objectviews:[],relshipviews:[]}],markedAsDeleted:!1,modified:!1},s=n.find(e=>"_ADMIN_MODEL"===e.name),a=d.find(e=>e.id===(null==s?void 0:s.metamodelRef)),r=d.find(e=>"AKM-Core_MM"===e.name),c=d.find(e=>"AKM-IRTV_MM"===e.name),p=d.find(e=>"AKM-POPS_MM"===e.name),u=(null==h?void 0:h.name.includes("AKM-OSDU_MM"))?"osdu-akm-models":"kavca-akm-models",m=(null==h?void 0:h.name.includes("AKM-OSDU_MM"))?3:1,f=h&&{id:(0,v.A)(),name:"02-Concept_IRTV",description:"Concept model based on AKM-IRTV_MM Metamodel. It includes the Information, Roles, Tasks, and Views. The intention of this model is to define the concepts and relationships between them, as well as the Roles and Tasks operating on Views of this Information.",metamodelRef:null==c?void 0:c.id,sourceMetamodelRef:"",targetMetamodelRef:"",targetModelRef:"",includeSystemtypes:!1,isTemplate:!1,templates:[],objects:[],relships:[],modelviews:[{id:(0,v.A)(),name:"0-Main",description:"Main Concepts View,  with Information defining the concepts and relationships between them. It may also include Views, Tasks, and Roles.",objectviews:[],relshipviews:[]}],markedAsDeleted:!1,modified:!1},b=h&&{id:(0,v.A)(),name:"03-Overview_POPS",description:"Overview model based on AKM-POPS_MM Metamodel. It includes the Products, Organisations, Processes, and Systems. The intention of this model is to make an overview model (Citymap).",metamodelRef:null==p?void 0:p.id,sourceMetamodelRef:"",targetMetamodelRef:"",targetModelRef:"",includeSystemtypes:!1,isTemplate:!1,templates:[],objects:[],relships:[],modelviews:[{id:(0,v.A)(),name:"0-Main",description:"Main Overview View with selected POPS Objects.",objectviews:[],relshipviews:[]}],markedAsDeleted:!1,modified:!1},A=[{...h,subMetamodels:[]},r!==h&&r,c!==h&&c,p!==h&&p,a].filter(e=>e),j={phData:{metis:{...e.phData.metis,models:[i,c!==h&&f,p!==h&&b,s],metamodels:A,name:t,description:"Modelling based on "+(null==h?void 0:h.name)+" Metamodel",currentModelRef:i.id,currentModelviewRef:i.modelviews[0].id,currentMetamodelRef:null==h?void 0:h.id}},phFocus:{...e.phFocus,focusModel:{id:i.id,name:i.name},focusModelview:{id:i.modelviews[0].id,name:i.modelviews[0].name},focusObject:{id:"",name:""},focusRelship:{id:"",name:""},focusObjectview:{id:"",name:""},focusRelshipview:{id:"",name:""},focusProj:{id:t,name:t,projectNumber:m,org:"kavca",repo:u,branch:"main",path:"",file:t+".json"}},phUser:{focusUser:{id:"0",name:"User",email:""}},phTemplate:t,phSource:t,lastUpdate:new Date().toISOString()};return console.log("112 CreateNewModel",j),j})();return console.log("116 CreateNewModel",f),f},b=e=>{console.log("36",e[0]),e.sort((e,t)=>e.osduId>t.osduId?1:t.osduId>e.osduId?-1:0);let t="{",l="{",o="}",i=[],s="",a=[],n=(e=>{e.map((n,d)=>{var r,c,p,u,m;let h;let v=n.osduId,f=(n.osduId.split("|").slice(-1)[0],n.osduId.split("|").slice(0,-2).join("|"),n.osduId.split("|").slice(-2)[0],null===(r=e[d-1])||void 0===r?void 0:r.osduId),b=(null===(c=e[d-1])||void 0===c||c.osduId.split("|").slice(-1)[0],null===(p=e[d+1])||void 0===p?void 0:p.osduId);null===(u=e[d+1])||void 0===u||u.osduId.split("|").slice(-1)[0],null===(m=e[d+1])||void 0===m||m.osduId.split("|").slice(-1)[0],h="required"===n.name?JSON.stringify(n.propNames.split(",")):JSON.stringify(function(e){let t={};for(var l in t=(null==e?void 0:e.osduId.split("|").slice(-1)[0])==="allOf"||(null==e?void 0:e.osduId.split("|").slice(-1)[0])==="items"&&[],e){if(!e.hasOwnProperty(l)||"object"==typeof e[l]||(e[l],"abstract"===l||"generatedTypeId"===l||"markedAsDeleted"===l||"objectviews"===l||"typeName"===l||"typeRef"===l||"viewkind"===l||"modified"===l||"id"===l||"name"===l||"jsonKey"===l||"jsonType"===l||"osduId"===l||""===e[l]))continue;let o=l;"osduType"===l&&(o="type"),t={...t,[o]:e[l]}}return!1===t||!0===t?"":t}(n)),console.log("55",n.name,h);let A="false"!==h?h.slice(0,-1):"",j="false"!==h?A.substring(1):"",E=null==f?void 0:f.split("|").length,g=null==v?void 0:v.split("|").length,x=(null==b?void 0:b.split("|").length)||0;l="isArray"===n.jsonType?"[":"{",o="isArray"===n.jsonType?"]":"}",i.unshift(o);let y=isNaN(n.jsonKey)?'"'.concat(n.jsonKey,'": ').concat(l).concat(j):"".concat(l).concat(j),T=e=>{a=[],e=e||g-x;do{let t=i.shift();a.unshift(t),e-=1}while(e>0);return a.length>1?a.reverse().join(""):a[0]};s=g>E&&g!==x?E>g?T():g>E&&g>x?T(g-E+(g-x))+",":g>E&&g<x?",":"":g===E?g<x?"{"===y.charAt(y.length-1)?"":",":T(g-E+(g-x))+",":E?E!==g&&g!==x?T(3)+",":T()+",":",",y+=s,t+=y}),t+=i.reverse().join(",");let n=(t+="}").replace(/,}/g,"}").replace(/,]/g,"]").replace(/{,/g,"{").replace(/\[,/g,"[").replace(/\{},/g,"");return'{{"'===n.substring(0,3)&&(n=(n=n.substring(1)).substring(0,n.length-1)),n})(e);return console.log("132 : ",n),n};JSON.safeStringify=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,l=[],o=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?l.includes(t)?void 0:l.push(t)&&t:t,t);return l=null,o};let A=e=>{var t,l,i,v,b,A;let[j,E]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),y=(0,u.wA)();null===(i=e.ph.phData)||void 0===i||null===(l=i.metis)||void 0===l||null===(t=l.models)||void 0===t||t.map((e,t)=>(0,o.jsxs)("span",{children:[e.name," | "]},e.id+t)),null===(A=e.ph.phData)||void 0===A||null===(b=A.metis)||void 0===b||null===(v=b.metamodels)||void 0===v||v.map((e,t)=>e&&(0,o.jsxs)("span",{children:[e.name," | "]},e.id+t));let T={phData:{...e.ph.phData,metis:{...e.ph.phData.metis,models:e.ph.phData.metis.models.filter(e=>e),metamodels:e.ph.phData.metis.metamodels.filter(e=>e)}},phFocus:e.ph.phFocus,phUser:e.ph.phUser,phSource:e.phSource,lastUpdate:new Date().toISOString()},{buttonLabel:_,className:M}=e,[S,O]=(0,a.useState)(!1),D=()=>O(!S),P=(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"btn-secondary border rounded border-secondary mr-2 mb-3  w-100 ","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click to save current Project (all models and metamodels) to file  (in Downloads folder)",onClick:function(){let t=e.ph.phData.metis.name;(0,h.gV)(T,t,"_PR")},children:"Save Project to File: ..._ALL.json"})}),N=(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"btn-secondary border rounded border-secondary mr-2 mb-3  w-100  ","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click to save current Project  (all models and metamodels) to file  (in Downloads folder. The date is added to the filename)",onClick:function(){let t=e.ph.phData.metis.name;(0,h.GY)(T,t,"_PR")},children:"Save Project to File: ..._date_ALL.json"})}),R=(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"btn-secondary border rounded border-secondary mr-2  w-100  ","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click to save current model to file (in Downloads folder)",onClick:function(){var t,l,o,i,s,a,n,d;e.ph.phData.metis.name;let r=null===(i=e.ph)||void 0===i?void 0:null===(o=i.phData)||void 0===o?void 0:null===(l=o.metis)||void 0===l?void 0:null===(t=l.models)||void 0===t?void 0:t.find(t=>{var l,o,i;return t.id===(null===(i=e.ph)||void 0===i?void 0:null===(o=i.phFocus)||void 0===o?void 0:null===(l=o.focusModel)||void 0===l?void 0:l.id)}),c=null===(d=e.ph)||void 0===d?void 0:null===(n=d.phData)||void 0===n?void 0:null===(a=n.metis)||void 0===a?void 0:null===(s=a.metamodels)||void 0===s?void 0:s.find(e=>e.id===(null==r?void 0:r.metamodelRef));(0,h.Ch)({metamodels:c,models:r},r.name,"_MO")},children:"Save Current Model to File: ..._MO.json (Metamodel included)"})}),C=(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"btn-secondary border rounded border-secondary mr-2  w-100  ","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click to save current modelview to file (in Downloads folder)",onClick:function(){var t,l,o,i,s,a,n,d,r;e.ph.phData.metis.name;let c=null===(i=e.ph)||void 0===i?void 0:null===(o=i.phData)||void 0===o?void 0:null===(l=o.metis)||void 0===l?void 0:null===(t=l.models)||void 0===t?void 0:t.find(t=>{var l,o,i;return t.id===(null===(i=e.ph)||void 0===i?void 0:null===(o=i.phFocus)||void 0===o?void 0:null===(l=o.focusModel)||void 0===l?void 0:l.id)}),p=null===(s=c.modelviews)||void 0===s?void 0:s.findIndex(t=>{var l,o,i;return t.id===(null===(i=e.ph)||void 0===i?void 0:null===(o=i.phFocus)||void 0===o?void 0:null===(l=o.focusModelview)||void 0===l?void 0:l.id)}),u=c.modelviews[p],m=c.objects.filter(e=>{var t;return null===(t=u.objectviews)||void 0===t?void 0:t.find(t=>t.objectRef===e.id)}),v=c.relships.filter(e=>{var t;return null===(t=u.relshipviews)||void 0===t?void 0:t.find(t=>t.relshipRef===e.id)}),f=null===(r=e.ph)||void 0===r?void 0:null===(d=r.phData)||void 0===d?void 0:null===(n=d.metis)||void 0===n?void 0:null===(a=n.metamodels)||void 0===a?void 0:a.find(e=>e.id===(null==c?void 0:c.metamodelRef));(0,h.HU)({metamodels:f,modelviews:u,objects:m,relships:v},c.name,"_MV")},children:"Save Current Modelview to File: ..._MV.json (Metamodel & Objects included)"})}),I=(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"btn-secondary border rounded border-secondary mr-2  w-100  ","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click to save current Metamodel to file (in Downloads folder) The current Metamoel is the Metamodel of the current Model.",onClick:function(){var t,l,o,i,s,a,n,d;let r=null===(i=e.ph)||void 0===i?void 0:null===(o=i.phData)||void 0===o?void 0:null===(l=o.metis)||void 0===l?void 0:null===(t=l.models)||void 0===t?void 0:t.find(t=>{var l,o,i;return t.id===(null===(i=e.ph)||void 0===i?void 0:null===(o=i.phFocus)||void 0===o?void 0:null===(l=o.focusModel)||void 0===l?void 0:l.id)}),c=null===(d=e.ph)||void 0===d?void 0:null===(n=d.phData)||void 0===n?void 0:null===(a=n.metis)||void 0===a?void 0:null===(s=a.metamodels)||void 0===s?void 0:s.find(e=>e.id===(null==r?void 0:r.metamodelRef));(0,h.Df)(c,c.name,"_MM")},children:"Save Current Metamodel to File: ..._MM.json"})}),w=(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"btn-secondary border rounded border-secondary mr-2  w-100  ","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click to save create a new startmodel project based on the generated metamodel from this modelview",onClick:function(){var t,l;let o=e.ph,i=null==o?void 0:null===(l=o.phData)||void 0===l?void 0:null===(t=l.metis)||void 0===t?void 0:t.metamodels,s=f(e.ph);if(!s){alert("No metamodel found in this modelview");return}let a=null==i?void 0:i.find(e=>"_ADMIN_METAMODEL"!==e.name&&e.id===s.phData.metis.metamodels[0].id),n=s.phData.metis.name;(0,h.gV)(s,n,"_PR");let d=null==a?void 0:a.name.replace("_MM","");(0,h.Df)(a,d,"_MM")},children:'Create files: "New-Project"_PR.json and "New-Metamodel"_MM.json'})});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"jsx-6c9b5c68836e9127",children:(0,o.jsxs)("button",{onClick:D,className:"jsx-6c9b5c68836e9127 btn bg-secondary text-white py-1 pe-1",children:["File ",(0,o.jsx)("i",{className:"jsx-6c9b5c68836e9127 fa fa-file-import fa-lg  me-1 "}),(0,o.jsx)("i",{className:"jsx-6c9b5c68836e9127 fa fa-file-export fa-lg me-1 ms-1 "})]})}),(0,o.jsxs)(n.A,{isOpen:S,toggle:D,className:M,children:[(0,o.jsx)(d.A,{toggle:()=>{D(),x(!g)},children:"Export/Import: "}),(0,o.jsxs)(r.A,{className:"pt-0 d-flex flex-column",children:[(0,o.jsxs)("span",{className:"jsx-6c9b5c68836e9127",children:[" Current Source : ",(0,o.jsxs)("strong",{className:"jsx-6c9b5c68836e9127",children:[" ",e.ph.phSource," "]})]}),(0,o.jsxs)("div",{className:"jsx-6c9b5c68836e9127 source bg-light p-2 ",children:[(0,o.jsx)("hr",{style:{borderTop:"1px solid #8c8b8",backgroundColor:"#9cf",padding:"2px",margin:"1px",marginBottom:"1px"},className:"jsx-6c9b5c68836e9127"}),(0,o.jsxs)("div",{className:"jsx-6c9b5c68836e9127 loadsave px-2 pb-1 mb-0",children:[(0,o.jsxs)("div",{className:"jsx-6c9b5c68836e9127 loadsave--modelToFile select mb-1 p-2 border border-dark",children:[(0,o.jsx)("h5",{className:"jsx-6c9b5c68836e9127",children:"Model"}),(0,o.jsxs)("div",{className:"jsx-6c9b5c68836e9127 selectbox mb-2 border",children:[(0,o.jsx)("h6",{className:"jsx-6c9b5c68836e9127",children:"Import from file (will overwrite current) "}),(0,o.jsx)("input",{title:"Choose a file",type:"file",accept:".json",onChange:t=>(0,m.s5)(e.ph,y,t),placeholder:"Choose a file",className:"jsx-6c9b5c68836e9127 select-input "})]}),(0,o.jsxs)("div",{className:"jsx-6c9b5c68836e9127 selectbox mb-2 border",children:[(0,o.jsx)("h6",{className:"jsx-6c9b5c68836e9127",children:"Export Models to file "}),P,N,R,C]})]}),(0,o.jsxs)("div",{className:"jsx-6c9b5c68836e9127 loadsave--metamodelToFile select mb-1 p-2 border border-dark",children:[(0,o.jsx)("h5",{className:"jsx-6c9b5c68836e9127",children:"Metamodel "}),(0,o.jsxs)("div",{className:"jsx-6c9b5c68836e9127 selectbox mb-2 border",children:[(0,o.jsx)("h6",{className:"jsx-6c9b5c68836e9127",children:"Import from file (will overwrite current)"}),(0,o.jsx)("input",{title:"Select a file",type:"file",accept:".json",onChange:t=>(0,m.rC)(e.ph,y,t),className:"jsx-6c9b5c68836e9127 select-input"})]}),(0,o.jsxs)("div",{className:"jsx-6c9b5c68836e9127 selectbox mb-2 border",children:[(0,o.jsx)("h6",{className:"jsx-6c9b5c68836e9127",children:"Export Metamodel to file "}),I]}),(0,o.jsxs)("div",{className:"jsx-6c9b5c68836e9127 selectbox mb-2 border",children:[(0,o.jsx)("h6",{className:"jsx-6c9b5c68836e9127",children:"Export New Startmodel-file and Metamodel-file from this modelview"}),w]})]})]})]})]}),(0,o.jsx)(c.A,{children:(0,o.jsx)(p.A,{className:"modal--footer m-0 py-1 px-2",color:"primary","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click when done!",onClick:()=>{D(),x(!g)},children:"Done"})})]}),(0,o.jsx)(s(),{id:"6c9b5c68836e9127",children:""})]})}},3479:(e,t,l)=>{l.d(t,{k:()=>o});let o=e=>{switch(e){case"master-data":return"#FEA07A";case"work-product":return"#FEFECE";case"work-product-component":return"#FFD701";case"abstract":return"#87CEFA";case"content":case"dataset":case"manifest":return"#F9C846";case"reference-data":return"#40E0D0";case"type":return"#87CEFE";case"Array":return"#BEFFC2";case"Item":return"#BEFFC5";case"Property":return"#90EE90";case"Proxy":return"#BDFFC4";case"object":return"#EEEEEE";default:return}}},4631:(e,t,l)=>{l.d(t,{rC:()=>i,s5:()=>o});let o=async(e,t,l)=>{var o;l.preventDefault();let i=new FileReader;if(i.fileName="",i.fileName=null===(o=l.target.files[0])||void 0===o?void 0:o.name,console.log("42 ReadModelFromFile",e,i.fileName),!i.fileName)return null;i.onload=async l=>{var o,s,a,n,d,r,c,p,u,m,h,v,f,b,A,j,E,g,x,y,T,_,M,S,O,D,P,N,R,C,I,w,F;let k=JSON.parse(l.target.result);i.fileName,k.project&&console.log("ReadModelFromFile.ts: The imported file contains .project",k),k.project&&(k=k.project);let L={metamodels:Array.isArray(k.metamodels)?k.metamodels:[k.metamodels],models:Array.isArray(k.models)?k.models:[k.models]};console.log("52 ReadModelFromFile",L);let U=k.objecttypes||null;k.relshiptypes;let K=k.modelviews||null,V=k.metamodels||null,H=k.objects||null,Y=k.relships||null,G=k.models||null,B=K&&K[0],J=V&&V[0],W=e?e.phData.metis:k.phData.metis,$=e?e.phFocus:k.phFocus,X=W.models.find(e=>{var t;return e.id===(null===(t=$.focusModel)||void 0===t?void 0:t.id)});if(!X)return null;let z=W.metamodels.find(e=>e.id===X.metamodelRef);X.modelviews.filter(e=>e&&void 0!=e.id&&e).find(e=>{var t;return e.id===(null===(t=$.focusModelview)||void 0===t?void 0:t.id)});let q=(null==J?void 0:J.id)&&e.phData.metis.metamodels.findIndex(e=>e.id===(null==J?void 0:J.id));console.log("79 ReadModelFromFile.ts: impMetamodels0",L);let Q=k;if(!Q)return null;console.log("105 ReadModelFromFile",Q=k.phData?{...k}:{...e,phData:{...e.phData,metis:{models:null===(o=e.phData)||void 0===o?void 0:o.metis.models.map(e=>L.models[0].id===e.id?L.models[0]:e),metamodels:[...e.phData.metis.metamodels]}}}),V&&(null===(m=Q.phData)||void 0===m||null===(u=m.metis)||void 0===u||null===(p=u.metamodels[0])||void 0===p||null===(c=p.objecttypes)||void 0===c||c.forEach(e=>{e.abstract||(e.abstract=!1),e.viewkind||(e.viewkind="Object"),e.typeName||(e.typeName="Object type"),e.markedAsDeleted||(e.markedAsDeleted=!1),e.modified||(e.modified=!1)}),null===(b=Q.phData)||void 0===b||null===(f=b.metis)||void 0===f||null===(v=f.metamodels[0])||void 0===v||null===(h=v.objecttypeviews)||void 0===h||h.forEach(e=>{e.viewkind||(e.viewkind="Object"),e.template||(e.template="textAndIcon"),e.markedAsDeleted||(e.markedAsDeleted=!1),e.modified||(e.modified=!1)}),null===(g=Q.phData)||void 0===g||null===(E=g.metis)||void 0===E||null===(j=E.metamodels[0])||void 0===j||null===(A=j.relshiptypes)||void 0===A||A.forEach(e=>{e.relshipkind||(e.relshipkind="Association"),e.cardinality||(e.cardinality=""),e.cardinalityFrom||(e.cardinalityFrom=""),e.cardinalityTo||(e.cardinalityTo="")})),G?(null===(_=Q.phData)||void 0===_||null===(T=_.metis)||void 0===T||null===(y=T.models[0])||void 0===y||null===(x=y.objects)||void 0===x||x.forEach(e=>{e.category||(e.category="Object"),e.typeName||(e.typeName="Generic"),e.description||(e.description=""),e.nameId||(e.nameId=""),e.viewkind||(e.viewkind=""),e.markedAsDeleted||(e.markedAsDeleted=!1),e.modified||(e.modified=!1),e.generatedTypeId||(e.generatedTypeId=""),e.abstract||(e.abstract=!1),e.valueset||(e.valueset=null),e.relshipkind||(e.relshipkind="Association")}),null===(D=Q.phData)||void 0===D||null===(O=D.metis)||void 0===O||null===(S=O.models[0])||void 0===S||null===(M=S.relship)||void 0===M||M.forEach(e=>{e.viewkind||(e.viewkind=""),e.markedAsDeleted||(e.markedAsDeleted=!1),e.modified||(e.modified=!1),e.relshipkind||(e.description="Association"),e.cardinality||(e.cardinality="0-n"),e.cardinalityFrom||(e.cardinalityFrom="0"),e.cardinalityTo||(e.cardinalityTo="n")})):(null==H||H.forEach(e=>{e.category||(e.category="Object"),e.typeName||(e.typeName="Generic"),e.description||(e.description=""),e.viewkind||(e.viewkind=""),e.markedAsDeleted||(e.markedAsDeleted=!1),e.modified||(e.modified=!1),e.generatedTypeId||(e.generatedTypeId=""),e.abstract||(e.abstract=!1),e.valueset||(e.valueset=null),e.relshipkind||(e.relshipkind="Association")}),null==Y||Y.forEach(e=>{e.viewkind||(e.viewkind=""),e.markedAsDeleted||(e.markedAsDeleted=!1),e.modified||(e.modified=!1),e.relshipkind||(e.description="Association"),e.cardinality||(e.cardinality="0-n"),e.cardinalityFrom||(e.cardinalityFrom="0"),e.cardinalityTo||(e.cardinalityTo="n")}));let Z=function(e,t){return null==t||t.forEach(t=>{let l=null==e?void 0:e.findIndex(e=>e&&e.id===t.typeRef);l>=0&&(t.typeName=e[l].name),t.nameId=t.name,t.description=t.description}),t}(U,H);X.objecttypes&&function(e,t){null==t||t.forEach(t=>{let l=e.findIndex(e=>e.name===t.typeName);l>=0&&(t.typeRef=e[l].id,t.typeName=e[l].name)})}(null==z?void 0:z.objecttypes,Z);let ee=null===(n=e.phData)||void 0===n?void 0:null===(a=n.metis)||void 0===a?void 0:null===(s=a.models)||void 0===s?void 0:s.findIndex(t=>{var l;return t.id===(null===(l=e.phFocus.focusModel)||void 0===l?void 0:l.id)});null===(r=e.phData)||void 0===r||null===(d=r.metis)||void 0===d||d.models.length;let et=e.phData.metis.models[ee].objects;if(function(e,t){if(t)null==e||e.forEach(e=>{let l=t.findIndex(t=>t.id===e.id);l<0?t.push(e):t[l]=e}),null==t?void 0:t.filter((e,t,l)=>t===l.findIndex(t=>t.id===e.id))}(H,et),!Q.phData){let t,l;t=(null==B?void 0:B.id)&&(null===(R=e.phData)||void 0===R?void 0:null===(N=R.metis)||void 0===N?void 0:null===(P=N.models[ee])||void 0===P?void 0:P.modelviews.findIndex(e=>e.id===(null==B?void 0:B.id))),l=null===(F=e.phData)||void 0===F?void 0:null===(w=F.metis)||void 0===w?void 0:null===(I=w.models[ee])||void 0===I?void 0:null===(C=I.modelviews)||void 0===C?void 0:C.length,(!t||t<0)&&(t=l),e.phData.metis.models[ee].modelviews;let o=H&&et.findIndex(e=>{var t;return e.id===(null===(t=H[0])||void 0===t?void 0:t.id)}),i=et.length;o&&o<0&&(o=i);let s=Y?e.phData.metis.models[ee].relships.findIndex(e=>{var t;return e&&e.id===(null===(t=Y[0])||void 0===t?void 0:t.id)}):null,a=e.phData.metis.models[ee].relships.length;s&&s<0&&(s=a);let n=e.phData.metis.metamodels.length;(!q||q<0)&&(q=n)}function el(e,l){t({type:e,data:l})}console.log("356 ReadModelFromFile",Q),el("LOAD_TOSTORE_PHDATA",Q.phData),Q.phFocus&&el("SET_FOCUS_PHFOCUS",Q.phFocus),Q.phSource&&el("LOAD_TOSTORE_PHSOURCE",Q.phSource),Q.phUser&&el("LOAD_TOSTORE_PHUSER",Q.phUser)},i.readAsText(l.target.files[0])},i=async(e,t,l)=>{l.preventDefault();let o=new FileReader;o.onload=async t=>{var l,o,i,s,a;let n=JSON.parse(t.target.result),d=null===(i=e.phData)||void 0===i?void 0:null===(o=i.metis)||void 0===o?void 0:null===(l=o.metamodels)||void 0===l?void 0:l.findIndex(e=>e.id===(null==n?void 0:n.id)),r=null===(a=e.phData)||void 0===a?void 0:null===(s=a.metis)||void 0===s?void 0:s.metamodels.length;d<0&&(d=r);let c={phData:{...e.phData,metis:{...e.phData.metis,metamodels:[...e.phData.metis.metamodels.slice(0,d),n,...e.phData.metis.metamodels.slice(d+1,e.phData.metis.metamodels.length)],models:e.phData.metis.models}}};e.dispatch({type:"LOAD_TOSTORE_PHDATA",data:c.phData})},o.readAsText(l.target.files[0])}},4797:(e,t,l)=>{l.d(t,{Ch:()=>i,Df:()=>s,GY:()=>n,HU:()=>o,R9:()=>d,gV:()=>a}),JSON.safeStringify=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,l=[],o=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?l.includes(t)?void 0:l.push(t)&&t:t,t);return l=null,o};let o=(e,t,l)=>{new Date().toISOString().slice(0,19);let o=t.includes("_MV")?t:t+l,i=new Blob([JSON.safeStringify(e)],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=o+".json",document.body.appendChild(a),a.click(),document.body.removeChild(a)},i=(e,t,l)=>{let o=t.includes("_MO")?t:t+l,i=new Blob([JSON.safeStringify(e)],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=o+".json",document.body.appendChild(a),a.click(),document.body.removeChild(a)},s=(e,t,l)=>{let o=t.includes("_MM")?t:t+l,i=new Blob([JSON.safeStringify(e)],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=o+".json",document.body.appendChild(a),a.click(),document.body.removeChild(a)},a=(e,t,l)=>{t||(t="New-Project");let o=(null==t?void 0:t.includes("_PR"))?t:t+l,i=new Blob([JSON.safeStringify(e)],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=o.includes(".json")?o:o+".json",document.body.appendChild(a),a.click(),document.body.removeChild(a)},n=(e,t,l)=>{let o=new Date().toISOString().slice(0,10),i=t.includes("_PR")?t+"_"+o:t+l+"_"+o,s=new Blob([JSON.safeStringify(e)],{type:"application/json"}),a=URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download=i+".json",document.body.appendChild(n),n.click(),document.body.removeChild(n)},d=(e,t)=>{new Date().toISOString().slice(0,19);let l="".concat(t),o=new Blob([e],{type:"image/svg+xml"}),i=URL.createObjectURL(o);console.log("105 SaveModelviewToSvgFileAuto",l);let s=document.createElement("a");s.href=i,s.download=l+".svg",document.body.appendChild(s),s.click()}},5378:(e,t,l)=>{l.d(t,{A:()=>i});var o=l(4232);let i=function(e,t){let[l,i]=(0,o.useState)(()=>{try{var l,o;let i=null===(o=window)||void 0===o?void 0:null===(l=o.sessionStorage)||void 0===l?void 0:l.getItem(e);return i?JSON.parse(i):t}catch(e){return console.log(e),t}});return[l,t=>{try{var o;let s=t instanceof Function?t(l):t;i(s),null===(o=window)||void 0===o||o.sessionStorage.setItem(e,JSON.stringify(s))}catch(e){console.log(e)}}]}},6167:(e,t,l)=>{l.d(t,{A:()=>u});var o=l(7876),i=l(4232),s=l(3060),a=l(3172),n=l(1445),d=l(5554),r=l(1777),c=l(1910),p=l(1758);l(4797);let u=e=>{let t=(0,r.wA)(),[l,u]=(0,i.useState)(e.refresh),m=(0,i.useRef)(null);e.ph.phFocus;let h=e.ph.phData;e.ph.phUser;let v=e.ph.phSource,[f,b]=(0,i.useState)("http://github.com/"),[A,j]=(0,i.useState)("Kavca"),[E,g]=(0,i.useState)("kavca-akm-models"),[x,y]=(0,i.useState)("akm-startups"),[T,_]=(0,i.useState)("main"),[M,S]=(0,i.useState)([]),[O,D]=(0,i.useState)({}),[P,N]=(0,i.useState)([]),[R,C]=(0,i.useState)([]),[I,w]=(0,i.useState)({}),[F,k]=(0,i.useState)(!1),[L,U]=(0,i.useState)(!1),[K,V]=(0,i.useState)(!1),{buttonLabel:H,className:Y}=e,G=()=>V(!K),B=(e.ph.phData,e.ph.phFocus,e.ph.phUser,""===v&&h.metis.name,new Date().toISOString(),e=>{J("".concat(A,"/").concat(E),"".concat(e)),setTimeout(()=>{u(!l)},3e3)}),J=async(e,l)=>{k(!0);let o="".concat(e);console.log("126 searchtexttmp",e,E,x,o,l,l);let i=o.replace(/\/\//g,"/");if(!i||i.includes("undefined"))return null;let s=await (0,p.YK)(i,x,l,T,"file"),a=(await (null==s?void 0:s.data.sha),null==s?void 0:s.data);if(D(a),k(!1),a){let e={phData:a.phData,phFocus:a.phFocus,phUser:a.phUser,phSource:"GitHub: ".concat(E,"/").concat(x,"/").concat(l)};e.phData&&t({type:"LOAD_TOSTORE_PHDATA",data:e.phData}),e.phFocus&&t({type:"LOAD_TOSTORE_PHFOCUS",data:e.phFocus}),e.phUser&&t({type:"LOAD_TOSTORE_PHUSER",data:e.phUser}),e.phSource&&t({type:"LOAD_TOSTORE_PHSOURCE",data:e.phSource})}},W=async(e,t)=>{var o,i;k(!0);let s=""!==t&&void 0!==t?"repos/".concat(e,"/").concat(E,"/contents/").concat(t):"repos/".concat(e,"/").concat(E,"/contents"),a=await (0,p.j6)(s,t);k(!1);let n=await (null==a?void 0:null===(o=a.data)||void 0===o?void 0:o.filter(e=>"dir"===e.type&&"img"!==e.name&&"imgdocs"!==e.name&&".github"!==e.name&&".gitignore"!==e.name));N(await (null==a?void 0:null===(i=a.data)||void 0===i?void 0:i.filter(e=>e.name.endsWith(".json")))),C(n),void 0===t||""===t?b("https://github.com/".concat(A,"/").concat(E,"/tree/").concat(T,"/")):b("https://github.com/".concat(A,"/").concat(E,"/tree/").concat(T,"/").concat(t)),u(!l)};(0,i.useEffect)(()=>{},[l]);let $=(null==P?void 0:P.map(e=>({value:e.name,label:e.name})))||[],X=[{value:"",label:(null==P?void 0:P.length)>0?" Select Model - - - ":' - - - Click on "LIST MODEL TEMPLATES" above! - - - '},...$];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{className:"btn bg-transparent py-0 my-0 pe-2 ps-1",onClick:G,children:[(0,o.jsx)("i",{className:"fab fa-github fa-lg my-0 py-0 me-1 "}),H]}),(0,o.jsxs)(s.A,{isOpen:K,toggle:G,className:Y,innerRef:m,children:[(0,o.jsxs)(a.A,{toggle:()=>{G()},children:[(0,o.jsx)("i",{className:"fab fa-github fa-lg mx-2"}),"GitHub Model Repository"]}),(0,o.jsx)(n.A,{className:"pl-1 pt-1 d-fle",children:(0,o.jsx)("div",{className:"bg-secondary",children:(0,o.jsxs)("div",{className:"bg-light square border py-2 border-2 border-success p-1 ",children:[(0,o.jsx)("strong",{children:"Download from a list of Model templates:"}),(0,o.jsxs)(d.A,{className:"btn-secondary bg-secondary text-white border-dark  mt-2 mb-2 pb- w-100",onClick:()=>W(A,x),children:[(0,o.jsx)("i",{className:"fab fa-github fa-lg me-2"}),"List Model Templates"]}),P.length>0?(0,o.jsxs)("div",{className:"",children:["Models found:",(0,o.jsxs)("span",{className:"text-success m-1 ",children:[P.map(e=>(0,o.jsxs)("li",{className:"px-2",children:[e.name,",   "]},e.name))," "]})]}):(0,o.jsx)("div",{className:"text-warning",children:" 'No models found!'"}),(0,o.jsx)("hr",{className:"bg-primary px-10 my-1 mx-4"}),(0,o.jsx)("label",{className:" d-inline-flex justify-content-left",children:(0,o.jsx)(c.A,{label:" Select model : ",value:X?X[0]:"no models",options:X||[],onChange:e=>B(e)})}),(0,o.jsx)("span",{className:"p-5",children:(0,o.jsx)(d.A,{className:"btn-primary modal--footer mr-4 py-0 ml-5 pl-5 float-end ",color:"primary","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click here when done!",onClick:()=>{G()},children:"Done"})}),(0,o.jsx)("hr",{className:"bg-secondary py-0 my-1 mx-4"})]})})})]})]})}},7276:(e,t,l)=>{l.d(t,{A:()=>b});var o=l(7876),i=l(4250),s=l.n(i),a=l(4232),n=l(3060),d=l(3172),r=l(1445),c=l(5554),p=l(8466),u=l(1777),m=l(2588),h=l(3479);let v=async(e,t,l,o,i,s,a,n,d,r,c,p,u,v,f)=>{var b,A;let j=null===(b=l.phData)||void 0===b?void 0:b.metis.models.find(e=>e.id===l.phFocus.focusModel.id);if(!j)return;null==j||j.objects;let E=l.phData.metis.metamodels.find(e=>e.id===j.metamodelRef),g=E.objecttypes,x=E.relshiptypes,y=g.find(e=>"JsonObject"===e.name&&e);g.find(e=>"OSDUType"===e.name&&e);let T=x.find(e=>"hasPart"===e.name&&e);x.find(e=>"contains"===e.name&&e);let _=x.find(e=>"has"===e.name&&e);x.find(e=>"refersTo"===e.name&&e);let M=null==y?void 0:y.id,S=null==T?void 0:T.id,O=null==T?void 0:T.name;x.find(e=>"Is"===e.name&&e);let D="Association",P=function(e,l,o,i,s){var a,n,d,r,c,p,u,m;let f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"object",b=arguments.length>6?arguments[6]:void 0,A=arguments.length>7?arguments[7]:void 0,j=arguments.length>8?arguments[8]:void 0,E=null===(a=g.find(e=>e.id===M))||void 0===a?void 0:a.name;if(console.log("105 createObject",e,l,o,i,s,f,b,A,j),!v&&l.includes("DEPRECATED"))return;let x="",y="",T="",_="";(null==b?void 0:null===(n=b.description)||void 0===n?void 0:n.includes("DEPRECATED"))&&(l+=" DEPRECATED",T="red"),x="OSDUType"===E?(0,h.k)(s):"Array"===E||"Item"===E?"#"+(0x1000000+((p=((r=parseInt(null==(d=(0,h.k)(s))?void 0:d.replace("#",""),16))>>16)+(c=Math.round(2.55*6)))<255?p<1?0:p:255)*65536+((u=(r>>8&255)+c)<255?u<1?0:u:255)*256+((m=(255&r)+c)<255?m<1?0:m:255)).toString(16).slice(1):"",y=(null==b?void 0:b.refGroupType)!==""?(0,h.k)(null==b?void 0:b.refGroupType):"",console.log("152 createObject",l,A,j,o,"typeColor 1",x,"2",y,"strokeColor 1",T,"strokeColor2",_=(null==b?void 0:b.refGroupType)!==""?(0,h.k)(null==b?void 0:b.refGroupType):"");let S={id:e,name:l,typeRef:o,abstract:"Abstract"===s,markedAsDeleted:!1,modified:!1,externalID:i,osduId:i,osduType:s,dataType:null==b?void 0:b.type,..."Proxy"===s&&{referenceObject:j,refGroupType:A,refVersion:null==b?void 0:b.refVersion},..."OSDUType"===E&&{fillcolor:x,fillcolor2:y,textcolor:"",textcolor2:"",strokecolor:T,strokecolor2:_,icon:"",image:""},...b};return console.log("188 Create object: ",S),t({type:"UPDATE_OBJECT_PROPERTIES",data:S}),S},N=(e,l,o,i,s,a,n,d,r,c)=>{let p=n&&{id:e,name:l,title:i.replace(/\s+/g,""),cardinality:"",description:o,fromobjectRef:n,nameFrom:d,generatedTypeId:"",markedAsDeleted:!1,modified:!1,relshipkind:a,toobjectRef:r,nameTo:c,typeRef:s,textcolor:"gray",strokecolor:"gray"};n&&r&&t({type:"UPDATE_RELSHIP_PROPERTIES",data:p})},R=[];if((null===(A=e.properties)||void 0===A?void 0:A.data)!==void 0){e.hasOwnProperty("properties")&&(delete e.properties.id,delete e.properties.kind,delete e.properties.version,delete e.properties.acl,delete e.properties.legal,delete e.properties.tags,delete e.properties.createTime,delete e.properties.createUser,delete e.properties.modifyTime,delete e.properties.modifyUser,delete e.properties.ancestry,delete e.properties.meta);let t=e.properties.data.allOf;e.properties={...e.properties,allOf:t},delete e.properties,e.allOf=[...t,JSON.parse('{ "$ref": "../abstract/AbstractSystemProperties.1.0.0.json" }')]}let C=e.id||e.$id||e["x-osdu-schema-source"];e.externalID=C,e.name=e.id?e.id.split(":").slice(-1)[0]:e.title;let I=function(e){var t,l,o="",i=0,s=-1;function a(e){for(l=e.length,i+=e.length;l--;)e[l][0]=o+JSON.stringify(e[l][0])+"|";return e}for(t=(t=a(Object.entries(e||{}))).sort((e,t)=>e.key<t.key);++s!==i;)if("object"==typeof t[s][1]&&null!==t[s][1]){let e;console.log("-----------------------------------------------------------------------"),o=t[s][0]+"",Array.isArray(t[s][1]),Array.prototype.push.apply(t,a(Object.entries(t[s][1])));let l=o.slice(0,-1).replace(/"/g,""),i=l.split("|");if(l.includes("|definitions")){let[,...t]=i;e=t.join("|")}else e=l;let n=e,d=t[s][1],r=j.objects.find(e=>e.osduId===n&&e),c=r?r.id:m.gj();R=[...R,[c,n,d]]}return R}({[e.$id?e.$id.split("/").slice(-1)[0]:e.id?e.id.split(":").slice(-1)[0]:e["x-osdu-schema-source"].split(":")[1].split("--")[1]]:e});function w(e,t){var l;return null==e?void 0:null===(l=e.split(t))||void 0===l?void 0:l.slice(-1)[0]}function F(e,t,l){var o;return null==e?void 0:null===(o=e.split(t))||void 0===o?void 0:o.slice(-l,-l+1)[0]}function k(e,t,l,o,i,s,a,n,d){P(e,t,d,l,o,i,s),V(e,t,a,n)}function L(e,t,l,o,i,s,a,d){var r,c,p,u;if(n)switch(!0){case"Set"===t.substring(t.length-3)||"Markers"===t||"CandidateReferenceCurveIDs"===t||"GeologicUnitInterpretationIDs"===t:M=null===(r=g.find(e=>"Array"===e.name))||void 0===r?void 0:r.id,s.viewkind="container",P(e,t,M,l,o,i,s),V(e,t,a,d);break;case t.includes("ID")||t.includes("IDs"):if("MarkepLId"===t||"IntervalID"===t||"VerticalMeasurementID"===t);else{M=null===(c=g.find(e=>"Array"===e.name))||void 0===c?void 0:c.id,t.replace("ID","");let n="has"+t;s.OSDUType=t,P(e,n,M,l,o,i,s),V(e,t,a,d)}break;case s.$ref:P(e,t,M=null===(p=g.find(e=>"Array"===e.name))||void 0===p?void 0:p.id,l,o,i,s),V(e,t,a,d);break;default:M=null===(u=g.find(e=>"Array"===e.name))||void 0===u?void 0:u.id,"Markers"===t&&(t=t.substring(0,t.length-1)),P(e,t,M,l,o,i,s),V(e,t,a,d)}}function U(e,t,l,o,i,s,a,n,d,r){K(e,t,l,o,i,s,a,n,d),V(e,t,a,n)}function K(e,t,l,o,i,s,a,n,d){var r,c,p,u,m,h,v,f,b;d=null===(r=g.find(e=>"Property"===e.name))||void 0===r?void 0:r.id,c=e,p=t,u=l,m=o,h=i,v=s,f=a,b=n,P(c,p,d,u,m,h,v),V(c,p,f,b)}function V(e,t,l,o){var i,s,a,n,d,r,c,p,u;if(!l)return;let h=R[0],v=h[0],f=h[1],b=h[1].split(".").slice(-1)[0],[A,j,E]=l,g=null==j?void 0:null===(i=j.split("|"))||void 0===i?void 0:i.slice(-1)[0],x=null==j?void 0:null===(s=j.split("|"))||void 0===s?void 0:s.slice(-2,-1)[0],y=null==j?void 0:null===(a=j.split("|"))||void 0===a?void 0:a.slice(-3,-2)[0],T=null==j?void 0:null===(n=j.split("|"))||void 0===n?void 0:n.slice(-4,-3)[0],M=null==j?void 0:null===(d=j.split("|"))||void 0===d?void 0:d.slice(-5,-4)[0],P=null==j?void 0:null===(r=j.split("|"))||void 0===r?void 0:r.slice(-6,-5)[0],C=(null==j||null===(c=j.split("|"))||void 0===c||c.slice(-7,-6)[0],j.split("|").slice(0,-1).join("|")),w=j.split("|").slice(0,-2).join("|"),F=j.split("|").slice(0,-3).join("|"),k=j.split("|").slice(0,-4).join("|");j.split("|").slice(0,-5).join("|"),j.split("|").slice(0,-6).join("|");let L=(null==o?void 0:null===(p=o.relationships)||void 0===p?void 0:p.find(e=>e.fromobjectRef===j&&e))||m.gj();if(S=null==_?void 0:_.id,O=null==_?void 0:_.name,D="Association","properties"===x){if(w===f)v&&e&&N(L,O,"","",S,D,v,b,e,t);else if(k===f)v&&e&&N(L,O,"","",S,D,v,b,e,t);else if("items"===y||"properties"===T){let l,o,i;"properties"===x?(o=(l=I.find(e=>e[1]===w))[0],i=l[1].split("|").slice(-1)[0]):"Markers"===T?(o=(l=I.find(e=>e[1]===C))[0],i=l[1].substring(0,l[1].length-1)):(o=(l=I.find(e=>e[1]===F))[0],i=l[1].split("|").slice(-1)[0]),o&&e&&N(L,O,"","",S,D,o,i,e,t)}else if("items"===M){let e;let t="",l="";"VerticalMeasurementID"===g&&"VerticalMeasurements"===P&&(t=(e=I.find(e=>e[1]===w))[0],l=e[1].split("|").slice(-1)[0],console.log("782 ",P,M,x,j)),t&&A&&N(L,O,"","",S,D,t,l,A,g)}else{let l=I.find(e=>e[1]===w),o=l[0],i=l[1].split("|").slice(-1)[0];o&&e&&N(L,O,"","",S,D,o,i,e,t)}}else if(E.$ref){let l=null===(u=I.find(e=>e[1]===j)[2])||void 0===u?void 0:u.type;if("data"===x){let l=I.find(e=>e[1]===C),o=l[0],i=l[1].split("|").slice(-1)[0];o&&e&&N(L,O,"","",S,D,o,i,e,t)}else if(w===f){let l=I.find(e=>e[1]===w),o=l[0],i=l[1].split("|").slice(-1)[0];o&&e&&N(L,O,"","",S,D,o,i,e,t)}else if(l){let l=I.find(e=>e[1]===w),o=l[0],i=l[1].split("|").slice(-1)[0];o&&e&&N(L,O,"","",S,D,o,i,e,t)}else{let l=I.find(e=>e[1]===C),o=l[0],i=l[1].split("|").slice(-1)[0];o&&e&&N(L,O,"","",S,D,o,i,e,t)}}else if("items"===g||"additionalProperties"===g){let l=I.find(e=>e[1]===C),o=l[0],i=l[1].split("|").slice(-1)[0];o&&e&&N(L,O,"","",S,D,o,i,e,t)}else if("items"===y){let l=I.find(e=>e[1]===F),o=l[0],i=l[1].split("|").slice(-1)[0];o&&e&&N(L,O,"","",S,D,o,i,e,t)}else if(C===f){let l=I.find(e=>e[1]===C),o=l[0],i=l[1].split("|").slice(-1)[0];o&&e&&N(L,O,"","",S,D,o,i,e,t)}}null==I||I.map((e,t)=>{var l,i,h,v,f,b,A;let[E,x,y]=e;if(!y)return;console.log("439 ",E,x,y);let T=y["x-osdu-schema-source"],_=null===(l=y.$id)||void 0===l?void 0:l.includes("master-data"),S=null===(i=y.$id)||void 0===i?void 0:i.includes("work-product-component"),O=null===(h=y.$id)||void 0===h?void 0:h.includes("reference-data"),D=null===(v=y.$id)||void 0===v?void 0:v.includes("abstract");if(!p&&_||!u&&S||!c&&O||!r&&D)return;let N=w(x,"|"),R=function(e){let t={};for(var l in e)e.hasOwnProperty(l)&&"object"!=typeof e[l]&&"name"!==l&&(t={...t,[l]:e[l]});return t}(y),C=F(x,"|",2),I=F(x,"|",3);F(x,"|",4);let k=Array.isArray(y)?"isArray":"isObject",H=y.$id?F(y.$id,"/",2):"",Y=H||y.type,G=w(T,":");0===t?function(e,t,l,o,i,s,a){var n;if("reference-data"===i&&!c||"master-data"===i&&!p||"abstract"===i&&!r||"work-product-component"===i&&!u)return;let d=t.replace(".json","");"Abstract"===i&&(s.abstract=!0),M=null===(n=g.find(e=>"OSDUType"===e.name))||void 0===n?void 0:n.id,d.includes("Abstract")&&"AbstractWorkProductComponent"!==d&&(d=d.replace("Abstract",""),s.abstract=!0),P(e,d,M,l,i,o,s)}(E,N,x,k,Y,{...R,groupType:H,version:G},0):y.$ref&&a?(console.log("473 processRefObject",N,R),function(e,t,l,o,i,s,a,n,d,r){var c;r=null===(c=g.find(e=>"Proxy"===e.name&&e))||void 0===c?void 0:c.id;let p=w(a.$ref,"/"),u=null==p?void 0:p.split(".")[0];s.title=u,s.refGroupType=F(a.$ref,"/",2),s.referenceObject="AbstractWorkProductComponent"===u?u:u.replace("Abstract",""),s.refVersion=w(a.$ref,":").split(".").slice(-1)[0];let m=s.refGroupType,h=s.referenceObject,v="Is".concat(s.title);P(e,v,r,l,i,o,s,m,h),V(e,v,n,d)}(E,0,x,k,Y,R,y,e,j,M)):"items"===N?(console.log("470 processItems",N,R),function(e,t,l,o,i,s,a,d,r,c,p){var u,m,h,v,f,b,A,j,E;n&&(null==a?void 0:a.endsWith("s"))?(u=e,m=a.endsWith("ies")?a.slice(0,-3)+"y":a.slice(0,-1),h=l,v=i,f=o,b=s,A=d,j=r,P(u,m,M=null===(E=g.find(e=>"Item"===e.name))||void 0===E?void 0:E.id,h,"Item",f,b),V(u,m,A,j)):p.allOf&&(a.slice(0,-1),function(e,t,l,o,i,s,a,n,d){P(e,t,d,l,o,i,s),V(e,t,a,n)}(e,t,l,i,o,s,d,r,c))}(E,N,x,k,Y,R,C,e,j,M,y)):(f=C,b=I,["properties","items"].includes(f)||["properties","items"].includes(b))?function(e,t,l,i,a,d,r,c,p,u,h,v,f){var b,A,j,E,x,y,T,_,M,S,O,D,N,R,C,I,w,F,k,H,Y,G,B;(null==r||null===(b=r.description)||void 0===b||!b.includes("DEPRECATED")||s)&&(r["x-osdu-relationship"]?(A=e,j=t,E=l,x=i,y=a,T=d,_=r,M=c,S=p,O=u,O=null===(D=g.find(e=>"Proxy"===e.name&&e))||void 0===D?void 0:D.id,x="Proxy",_["x-osdu-relationship"].map(e=>{let t=m.gj(),l=e.GroupType,o=e.EntityType;x="Proxy";let i=j.includes("ID")?o:_.title?_.title.replace(/\s+/g,""):e.OSDUType?e.OSDUType:"items"!==j?j:"properties"!==gparentName?gparentName:parentName,s=E+"|x-osdu-relationship|"+i,a="has"+i;console.log("740 ",i,A,j,l,e),console.log("741 ",t,a,O,s,x,y,T,l,o,M,S),P(t,a,O,s,x,y,T,l,o),V(t,a,M,S)})):o&&r["x-osdu-frame-of-reference"]?K(e,t,l,a,i,d,c,p,u):n&&(r["x-osdu-indexing"]||"array"===r.type)?L(e,t,l,a,i,d,c,p):n&&r.Tags?L(e,t,l,a,i,d,c,p):o&&["string","number","integer","boolean"].includes(r.type)?"additionalProperties"===t?(console.log("514 string",e,t,l,r),Object.entries(r).map(e=>{let[t,o]=e,s=m.gj();d.description="additionalProperty";let n=l+"|"+t;console.log("519 string",s,t,n,a,i,d,c,p,u,void 0),U(s,t,n,a,i,d,c,p,u,h)})):U(e,t,l,a,i,d,c,p,u,h):n&&"object"===r.type?(N=e,R=t,C=l,I=a,w=i,F=r,k=d,H=c,Y=p,P(N,R,F.properties?null===(G=g.find(e=>"Item"===e.name))||void 0===G?void 0:G.id:null===(B=g.find(e=>"Array"===e.name))||void 0===B?void 0:B.id,C,I,w,k),V(N,R,H,Y)):"object"==typeof r.type&&processEnumProperty(e,t,l,a,i,d,c,p,r.type))}(E,N,x,k,Y,R,y,e,j,M):s&&(A=N,["required","additionalProperties","x-osdu-review-status","x-osdu-virtual-properties","x-osdu-inheriting-from-kind","x-osdu-side-car-type-to","x-osdu-supported-file-formats"].some(e=>A.includes(e)))?function(e,t,l,o,i,s,a,n,d){K(e,t,l,i,o,{...s,description:JSON.stringify(s)},a,n,d)}(E,N,x,k,Y,R,e,j,M):d&&function(e,t,l,o,i,s,a,n){P(e,t,"5cc540c0-ea91-4401-74bb-4f7cb52a2366",l,i,o,s),V(e,t,a,n)}(E,N,x,k,Y,R,e,j)})},f=async(e,t,l,o)=>{let i,s,a,n,d,r,c,p;let u=t.phData.metis.models.find(e=>e.id===t.phFocus.focusModel.id),h=u.objects,v=u.relships,f=t.phData.metis.metamodels.find(e=>e.id===u.metamodelRef),b=f.objecttypes,A=f.relshiptypes,j=(A.find(e=>"refersTo"===e.name&&e),A.find(e=>"has"===e.name&&e)),E=A.find(e=>"relationshipType"===e.name&&e),g=null==E?void 0:E.id,x=null==E?void 0:E.name,y=(e,t,i,s,a,n,d,r,c,p,u)=>{if(!o&&u.description&&u.description.includes("DEPRECATED:"))return;let m=v.find(t=>t.id===e),h="";u.description&&u.description.includes("DEPRECATED:")&&(t+="DEPRECATED:",h="red");let f=d&&c&&{id:e,name:t||"",title:s||"",typeRef:n,cardinality:"",description:i||"",strokeColor:h,fromobjectRef:d,nameFrom:r,generatedTypeId:"",markedAsDeleted:!1,modified:!1,relshipkind:a,toobjectRef:c,nameTo:p};m?l({type:"UPDATE_OBJECT_PROPERTIES",data:{id:u.id,markedAsDeleted:!0}}):d&&c&&(l({type:"UPDATE_RELSHIP_PROPERTIES",data:f}),l({type:"UPDATE_OBJECT_PROPERTIES",data:{id:u.id,markedAsDeleted:!0}}))},T=m.zI(u.objects,b,"Proxy");T.forEach(e=>{let t=(""===e.refVersion||void 0===e.refVersion?m.fJ(u.objects,e.referenceObject):m.nh(u.objects,e.referenceObject+e.refVersion))||m.PO(u.objects,e.referenceObject);if(t&&t){var l,o,f,A,T;a=null==(p=e?m.Mu(e,"",h,v):null)?void 0:p.id,n=null==p?void 0:p.name;let u=null===(l=h.find(e=>e.id===a))||void 0===l?void 0:l.typeRef;null===(o=b.find(e=>e.id===u))||void 0===o||o.name,s=e.title?e.title:e.name?e.name:"no title",i=e.description,d=null==t?void 0:t.id,r=null==t?void 0:t.name;let _=null===(f=h.find(e=>e.id===d))||void 0===f?void 0:f.typeRef;null===(A=b.find(e=>e.id===_))||void 0===A||A.name;let M=m.YX(v,a,d,null==E?void 0:E.id);c=M?M.id:m.gj(),g=null==E?void 0:E.id,"ColumnStratigraphicHorizonTopID"===e.title?(x=(null==j?void 0:j.name)+"Top",i="".concat(n," has Top ").concat(r)):"ColumnStratigraphicHorizonBaseID"===e.title&&(x=(null==j?void 0:j.name)+"Base",i="".concat(n," has Base ").concat(r)),d&&a&&((null===(T=e.$ref)||void 0===T?void 0:T.includes("abstract"))?y(c,x="Is",i,s,"Generalization",g,a,n,d,r,e):(x=e.title||e.name||"no title",y(c,x,i,s,"Association",g,a,n,d,r,e)))}}),T.filter(e=>e.$ref).forEach(e=>{var t,l;let o=null===(t=e.$ref)||void 0===t?void 0:t.split("/").pop(),i=null==o?void 0:o.split(".")[0],f=m.PO(u.objects,i),j=m.jQ(v,null==f?void 0:f.id,null==E?void 0:E.id)||null;if(f){(p=e?m.Mu(e,"",h,v):null)||console.log("171 topLevelObject does not exist"),a=null==p?void 0:p.id,n=null==p?void 0:p.name,d=null==f?void 0:f.id,r=null==f?void 0:f.name,c=j?j.id:m.gj();let t=null===(l=h.find(e=>e.id===a))||void 0===l?void 0:l.typeRef,o=h.find(e=>e.id===d).typeRef;b.find(e=>e.id===t),b.find(e=>e.id===o);let i=A.find(e=>"5718b4c7-3aa1-4ee3-0a9d-5e7cdcd18a24"===e.id&&e);if(v.find(e=>e.fromobjectRef===a&&e.toobjectRef===d&&e.reltypeRef===(null==i?void 0:i.id)));else{g=null==i?void 0:i.id,x=null==i?void 0:i.name;let t="".concat(n," Is ").concat(r);s="",a&&d&&!j&&y(c,x,t,s,"Association",g,a,n,d,r,e)}}})},b=e=>{var t,l,i,m,h,b,A;if(!(null===(t=e.ph.phData)||void 0===t?void 0:t.metis.models))return(0,o.jsx)(o.Fragment,{});let j=(0,u.wA)(),[E,g]=(0,a.useState)(!1),x=()=>g(!E),[y,T]=(0,a.useState)(!0),[_,M]=(0,a.useState)(!0),[S,O]=(0,a.useState)(!0),[D,P]=(0,a.useState)(!0),[N,R]=(0,a.useState)(!1),[C,I]=(0,a.useState)(!1),[w,F]=(0,a.useState)(!1),[k,L]=(0,a.useState)(!1),[U,K]=(0,a.useState)(!1),[V,H]=(0,a.useState)(!1),[Y,G]=(0,a.useState)(!1),[B,J]=(0,a.useState)(""),[W,$]=(0,a.useState)(!1),[X,z]=(0,a.useState)(!1),[q,Q]=(0,a.useState)(null),[Z,ee]=(0,a.useState)(null);(0,a.useEffect)(()=>{T(W),M(W),O(W),P(W)},[W]),(0,a.useEffect)(()=>{R(X),I(X),F(X),L(X),K(X),H(X)},[X]);let et=async e=>{try{let t=await fetch("/api/proxy?url=".concat(encodeURIComponent(e)));if(!t.ok)throw Error("Error fetching data: ".concat(t.statusText));let l=await t.json();return Q(l),l}catch(e){return ee(e.message),null}},el=async t=>{let l=await et(t);l&&v(l,j,e.ph,N,C,U,k,w,Y,D,S,y,_,V,"AKM")},eo=async t=>{let l=Array.from(t.target.files).map(e=>{let t=new FileReader;return new Promise((l,o)=>{t.onload=()=>{try{let e=JSON.parse(t.result);l(e)}catch(e){o(Error("Failed to parse JSON"))}},t.onerror=()=>{o(Error("Failed to read file"))},t.readAsText(e)})});(await Promise.all(l)).map(t=>{v(t,j,e.ph,N,C,U,k,w,Y,D,S,y,_,V,"AKM")})},ei=async e=>{if(0===Array.from(e.target.files).filter(e=>e.isDirectory).length){await es(e);return}for(let e of subDir){await es(e);let t=await getSubDirectories(e);await ei(t)}},es=async t=>{let l=Array.from(t.target.files);if(0!==l.length)for(let t of l)if("application/json"===t.type){let l=new FileReader;l.onload=async()=>{v(l.result,j,e.ph,N,C,U,k,w,Y,D,S,y,_,V,"AKM")},l.readAsText(t)}else console.log("File is not a JSON file.")},ea=null===(m=e.ph.phData)||void 0===m?void 0:null===(i=m.metis)||void 0===i?void 0:null===(l=i.models)||void 0===l?void 0:l.find(t=>{var l,o;return t.id===(null===(o=e.ph.phFocus)||void 0===o?void 0:null===(l=o.focusModel)||void 0===l?void 0:l.id)}),en=null===(A=e.ph.phData)||void 0===A?void 0:null===(b=A.metis)||void 0===b?void 0:null===(h=b.metamodels)||void 0===h?void 0:h.find(e=>e.id===(null==ea?void 0:ea.metamodelRef)),ed=(0,o.jsxs)(n.A,{size:"lg",isOpen:E,toggle:x,children:[(0,o.jsx)(d.A,{toggle:()=>{x(),e.setRefresh(!e.refresh)},children:"Import OSDU Schema:"}),(null==en?void 0:en.name)!=="AKM-OSDU_MM"&&E?(0,o.jsx)(r.A,{className:"d-flex flex-column",children:(0,o.jsxs)("div",{className:"source bg-warning p-5 m-5 fs-3",children:[(0,o.jsx)("div",{children:"Current metamodel is not an AKM-OSDU_MM metamodel!"}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{children:"Please select a model with an AKM-OSDU_MM metamodel to import OSDU JSON files."})]})}):(0,o.jsx)(r.A,{className:"d-flex flex-column bg-success",children:(0,o.jsxs)("div",{className:"source bg-light p-2",children:[(0,o.jsxs)("div",{className:"loadsave--JsonToFile select bg-light mb- p-2 border border-dark",children:[(0,o.jsx)("h5",{children:"Import JSON-Schema files:"}),(0,o.jsx)("p",{children:"(This will import the Schema EntityTypes with Properties as OSDUTypes, Relationship Proxies, PropertyArrays, Items and Properties)"}),(0,o.jsxs)("div",{className:"selectbox3 mb-1 border",children:[(0,o.jsx)("div",{className:"mt-2",children:" Include EntityTypes:"}),(0,o.jsxs)("div",{className:"d-flex justify-content-between align-items-center my-2 border label-input-container",children:[(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center pe-1",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1 text-secondary",htmlFor:"selectAllEntityTypes",children:"Select All"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Select All EntityTypes",checked:W,onChange:()=>$(!W)})]}),(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center pe-1",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1 text-secondary",htmlFor:"inclMasterdata",children:"Master_data"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Include master-data",checked:y,onChange:()=>T(!y)})]}),(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center m-1 pe-1",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1 text-secondary",htmlFor:"inclWorkProductComp",children:"Work_Product_Components"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Include work-product-component",checked:_,onChange:()=>M(!_)})]}),(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center m-2 pe-1",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1 text-secondary",htmlFor:"inclReference",children:"Reference_Components"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Include reference-data",checked:S,onChange:()=>O(!S)})]}),(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center m-1 pe-1",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1 text-secondary",htmlFor:"inclAbstract",children:"Abstract_Components"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Include Abstract Types",checked:D,onChange:()=>P(!D)})]})]}),(0,o.jsx)("hr",{style:{borderTop:"4px solid #8c8b8",backgroundColor:"#9cf",padding:"2px",marginTop:"3px",marginBottom:"3px"}}),(0,o.jsx)("div",{className:"mt-2",children:" Include Properties and relationships Proxies:"}),(0,o.jsxs)("div",{className:"d-flex justify-content-between align-items-center my-2 border label-input-container",children:[(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1",htmlFor:"selectAllProperties",children:"Select All"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Select All Properties",checked:X,onChange:()=>z(!X)})]}),(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1",htmlFor:"inclProps",children:"Properties"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Include Props",checked:N,onChange:()=>R(!N)})]}),(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center pe-1",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1 text-secondary",htmlFor:"inclPropLinks",children:"Relationship_Proxies"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Include Proxy",checked:C,onChange:()=>I(!C)})]}),(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center pe-1",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1 text-secondary",htmlFor:"inclAbstractPropLinks",children:"Abstract_Proxies"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Include Abstract Proxy",checked:k,onChange:()=>L(!k)})]}),(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center pe-1",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1 text-secondary",htmlFor:"inclArrayProperties",children:"Arrays"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Include Array",checked:w,onChange:()=>F(!w)})]}),(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center pe-1",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1 text-secondary",htmlFor:"inclXOsduProperties",children:"x_osdu_Properties"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Include XOsdu Properties",checked:U,onChange:()=>K(!U)})]}),(0,o.jsxs)("span",{className:"bg-light d-flex align-items-center pe-1",style:{height:"100%"},children:[(0,o.jsx)("label",{className:"flex-grow-1 text-secondary",htmlFor:"inclDeprecated",children:"Incl_DEPRECATED"}),(0,o.jsx)("input",{className:"checkbox-input ms-1",type:"checkbox",title:"Include Deprecated",checked:V,onChange:()=>H(!V)})]})]})]}),(0,o.jsx)("hr",{style:{borderTop:"4px solid #8c8b8",backgroundColor:"#9cf",padding:"2px",marginTop:"3px",marginBottom:"3px"}}),(0,o.jsx)("label",{className:"pt-1",htmlFor:"gitLabUrl",children:"GitLab URL - Open Raw URL in OSDU community (see link at the bottom) and Copy paste the URL below"}),(0,o.jsx)("input",{className:"select-input w-100",type:"text",title:"Enter GitLab URL",value:B,onChange:e=>J(e.target.value)}),(0,o.jsx)(c.A,{className:"modal--footer m-0 py-1 px-2 w-100",color:"primary","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Find Proxies that refers to EntityTypes and convert to relationships!",onClick:()=>{el(B)},children:"Import JSON URL from GitLab"}),(0,o.jsx)("label",{className:"pt-1",htmlFor:"directory",children:"File(s)"}),(0,o.jsx)("input",{className:"select-input w-100",type:"file",title:"Select Directory",accept:".json",onChange:eo,multiple:!0}),(0,o.jsx)("label",{className:"pt-3",htmlFor:"directory",children:"or Directory"}),(0,o.jsx)("input",{className:"select-input w-100",type:"file",title:"Select Directory",accept:".json",onChange:ei,webkitdirectory:"true",directory:"true"}),(0,o.jsxs)("div",{className:"selectbox3 mb-2",children:[(0,o.jsx)("h6",{children:"Connect imported OSDU Types"}),(0,o.jsx)(c.A,{className:"modal--footer m-0 py-1 px-2 w-100",color:"primary","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Find Proxies that refers to EntityTypes and convert to relationships!",onClick:()=>{f("JSON",e.ph,j,V)},children:"Convert temporary Proxy-objects to Relationships"})]})]}),(0,o.jsx)("div",{className:"loadsave--JsonToFile border border-dark",children:(0,o.jsxs)("div",{className:"selectbox",children:[(0,o.jsx)("h5",{children:"Export OSDUType object with attributes to OSDU Excel file :"}),(0,o.jsx)("p",{className:"selectbox3 mb-0",children:'Select the OsduType you want to export. Then click on "OBJECT DETAIL" in the upper right corner of the modelling area, then select the "Export" tab.'})]})}),(0,o.jsxs)("div",{className:"selectbox2 mb-1 border bg-light",children:[(0,o.jsx)("h6",{children:"Link to the OSDU Open Subsurface Data Universe - Data Definitions"}),(0,o.jsx)("h6",{children:"(This will open a new tab in your browser)"}),(0,o.jsx)("a",{className:"text-primary",href:"https://community.opengroup.org/osdu/data/data-definitions/-/tree/master/Generated",target:"_blank",rel:"noopener",children:"https://community.opengroup.org/osdu/data/data-definitions/-/tree/master/Generated"})]})]})}),(0,o.jsx)(p.A,{children:(0,o.jsx)(c.A,{className:"modal--footer m-0 py-0 px-2","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click here when done!",onClick:()=>{x(),null==e||e.setRefresh(!(null==e?void 0:e.refresh))},children:"Done"})})]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"jsx-f6002c7671044e4",children:(0,o.jsxs)("button",{onClick:x,className:"jsx-f6002c7671044e4 btn bg-success text-white py-1 ps-0 px-0",children:["OSDU Imp ",(0,o.jsx)("i",{className:"jsx-f6002c7671044e4 fa fa-file-import fa-lg "})]})}),ed,(0,o.jsx)(s(),{id:"f6002c7671044e4",children:".selectbox2.jsx-f6002c7671044e4{background-color:rgba(0,0,0,.3);border:20px;border-color:tomato;padding:1%}.selectbox3.jsx-f6002c7671044e4{background-color:rgba(100,100,100,.1);border:20px;border-color:tomato;padding:1%}"})]})}},7705:(e,t,l)=>{l.d(t,{A:()=>d});var o=l(7876),i=l(4232),s=l(1777),a=l(5378),n=l(4797);let d=function(e){var t,l,d,r,c,p,u,m,h,v,f,b,A,j,E,g,x,y,T,_,M,S,O,D;let P=(0,s.wA)();console.log("7 ProjectDetailsForm",e.props.phFocus);let[N,R]=(0,i.useState)(e.props.phFocus.focusProj.name),[C,I]=(0,i.useState)(null===(t=e.props.phFocus)||void 0===t?void 0:t.focusProj.projectNumber),[w,F]=(0,i.useState)(null===(l=e.props.phFocus)||void 0===l?void 0:l.focusProj.id),[k,L]=(0,i.useState)(null===(d=e.props.phFocus)||void 0===d?void 0:d.focusProj.name),[U,K]=(0,i.useState)((null===(c=e.props.phFocus)||void 0===c?void 0:null===(r=c.focusProj)||void 0===r?void 0:r.org)||(null===(p=e.props.phFocus)||void 0===p?void 0:p.focusOrg.name)),[V,H]=(0,i.useState)(null===(u=e.props.phFocus)||void 0===u?void 0:u.focusProj.repo),[Y,G]=(0,i.useState)(null===(m=e.props.phFocus)||void 0===m?void 0:m.focusProj.path),[B,J]=(0,i.useState)((null===(h=e.props.phFocus)||void 0===h?void 0:h.focusProj.file)||e.props.phData.metis.name||e.props.phSource+".json"),[W,$]=(0,i.useState)(e.props.phSource),[X,z]=(0,i.useState)(null===(v=e.props.phFocus)||void 0===v?void 0:v.focusProj.branch),[q,Q]=(0,i.useState)(null===(f=e.props.phFocus)||void 0===f?void 0:f.focusModel),[Z,ee]=(0,i.useState)(null===(b=e.props.phFocus)||void 0===b?void 0:b.focusModelview),[et,el]=(0,i.useState)(null===(A=e.props.phFocus)||void 0===A?void 0:A.focusObject),[eo,ei]=(0,i.useState)(null===(j=e.props.phFocus)||void 0===j?void 0:j.focusObjectview),[es,ea]=(0,i.useState)(null===(E=e.props.phFocus)||void 0===E?void 0:E.focusOrg),[en,ed]=(0,i.useState)(null===(g=e.props.phFocus)||void 0===g?void 0:g.focusProj),[er,ec]=(0,i.useState)(null===(x=e.props.phFocus)||void 0===x?void 0:x.focusRole),[ep,eu]=(0,i.useState)(null===(y=e.props.phFocus)||void 0===y?void 0:y.focusTask),[em,eh]=(0,i.useState)(null===(T=e.props.phFocus)||void 0===T?void 0:T.focusIssue),[ev,ef]=(0,a.A)("memorystate",[]);(0,i.useEffect)(()=>{var t;console.log("53 ProjectDetailsForm useEffect 1",e.props.phFocus),F(w),L(k),K(U),H(V),G(Y),z(X),J(B),$("".concat(U,"/").concat(V).concat(Y&&""!==Y?"/".concat(Y.toString(),"/"):"/").concat(B)),I(C),eh(null===(t=e.props.phFocus)||void 0===t?void 0:t.focusIssue)},[B,k,U,V,Y,X,C,em,e.props.phFocus,w]),(0,i.useEffect)(()=>{var t,l;console.log("57 ProjectDetailsForm useEffect 2",e.props.phFocus),J(null===(t=e.props.phFocus)||void 0===t?void 0:t.focusProj.file),L(null===(l=e.props.phFocus)||void 0===l?void 0:l.focusProj.name)},[]),(null===(_=e.props.phFocus)||void 0===_?void 0:_.focusProj.id)&&(null===(M=e.props.phFocus)||void 0===M||M.focusProj.id);let eb=(null===(S=e.props.phFocus)||void 0===S?void 0:S.focusProj.name)?null===(O=e.props.phFocus)||void 0===O?void 0:O.focusProj.name:V,eA=(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("button",{className:"btn btn-sm rounded bg-primary text-light w-100 d-flex justify-content-center align-items-center","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click here to Save the Project file to the local file system",onClick:()=>{console.log("projectDatailsForm 97",B),P({type:"LOAD_TOSTORE_PHSOURCE",data:"".concat(B)}),console.log("ProjectDetailsForm 100",B),(0,n.gV)({phData:e.props.phData,phFocus:e.props.phFocus,phSource:e.props.phSource,phUser:e.props.phUser},B,"_PR")},children:[(0,o.jsx)("i",{className:"fa fa-save fa-lg pe-2"})," Save to local file"]})});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"h5 w-100",children:["Project name : ",(0,o.jsxs)("span",{className:"bg-light ms-2 px-2 w-100",children:[" ",eb]})]}),(0,o.jsx)("hr",{}),(0,o.jsx)("div",{className:"d-flex justify-content-around ",children:"GitHub repository parameters necessary to access the repository and the project file."}),(0,o.jsxs)("form",{onSubmit:t=>{t.preventDefault();let l={id:k,name:k,org:U,repo:V,path:Y,file:B,branch:X,projectNumber:C};console.log("79 ProjectDetailsForm",l,W),P({type:"SET_FOCUS_PROJ",data:l}),P({type:"LOAD_TOSTORE_PHSOURCE",data:W});let o=setTimeout(()=>{console.log("44 ProjectDetailsForm",e.props.phFocus),ef(e.props)},2e3);return()=>clearTimeout(o)},children:[(0,o.jsxs)("div",{className:"d-flex flex-column justify-content-end border ms-auto  p-1 mx-2",children:[(0,o.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,o.jsx)("label",{children:"Project:"}),(0,o.jsx)("input",{className:"rounded bg-white px-1 border-light w-75",type:"text",value:k,onChange:e=>{L(e.target.value),J(e.target.value+"_PR.json")},title:"Project name"})]}),(0,o.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,o.jsx)("label",{children:"Organisation:"}),(0,o.jsx)("input",{className:"rounded bg-white px-1 border-light w-75",type:"text",value:U,onChange:e=>K(e.target.value),title:"Organisation name"})]}),(0,o.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,o.jsx)("label",{children:"Repo:"}),(0,o.jsx)("input",{className:"rounded bg-white px-1 border-light w-75",type:"text",value:""!==V?V:null===(D=e.props.phFocus)||void 0===D?void 0:D.focusProj.name,onChange:e=>H(e.target.value),title:"Repository name"})]}),(0,o.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,o.jsx)("label",{children:"Path:"}),(0,o.jsx)("input",{className:"rounded bg-white px-1 border-light w-75",type:"text",placeholder:"models",value:Y,onChange:e=>G(e.target.value),title:"Path to the project file in the GitHub repository"})]}),(0,o.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,o.jsx)("label",{children:"Branch:"}),(0,o.jsx)("input",{className:"rounded bg-white border-light px-1 w-75",type:"text",value:X,onChange:e=>z(e.target.value),title:"Branch name"})]}),(0,o.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,o.jsx)("label",{children:"Filename:"}),(0,o.jsx)("input",{className:"rounded bg-light border-light px-1 w-75",type:"text",defaultValue:B,value:B,onChange:e=>{J(e.target.value)},title:"Project filename"})]}),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",{className:" mb-2",children:["Project File Source full path:",(0,o.jsx)("label",{children:"github.com/"}),(0,o.jsx)("input",{className:"rounded bg-white px-1 border-light w-100",type:"text",value:"".concat(U,"/").concat(V).concat(Y&&""!==Y?"/".concat(Y.toString(),"/"):"/").concat(B),title:"File path to the project file in the GitHub repository"})]}),(0,o.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,o.jsx)("label",{children:"Project Number (github):"}),(0,o.jsx)("input",{className:"rounded bg-white px-1 border-light w-25",type:"text",value:C,onChange:e=>I(e.target.value),title:"Project number in the GitHub repository"})]}),(0,o.jsx)("div",{className:"d-flex justify-content-end",children:(0,o.jsx)("button",{className:"button btn bg-success btn-sm mt-4 px-3",type:"submit","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click here to save the above GitHub settings",children:"Save GitHub settings"})})]}),(0,o.jsx)("hr",{className:"mt-5 pt-5"}),(0,o.jsx)("p",{children:'Change the name of the Project from "...-Template to your Project-name and save the file.'}),eA]})]})}},7725:(e,t,l)=>{l.d(t,{A:()=>v});var o=l(7876),i=l(4232),s=l(3060),a=l(3172),n=l(1445),d=l(5554),r=l(1777),c=l(1040);let p=e=>{let{label:t,value:l,onChange:s,placeholder:a}=e,[n,d]=(0,i.useState)(l),[r,c]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=setTimeout(()=>{c(n)},100);return()=>clearTimeout(e)},[n]),(0,i.useEffect)(()=>{s(r)},[r]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("span",{className:"w-25 float-left bg-light py-1",children:[" ",t," "]}),(0,o.jsx)("input",{className:"w-75",value:n,onChange:e=>d(e.target.value),placeholder:a})]})};var u=l(1910),m=l(1758),h=l(4797);let v=e=>{var t,l,v,f,b,A,j,E;let g=(0,r.wA)(),[x,y]=(0,i.useState)(!0),T=(0,i.useRef)(null),_=(0,i.useRef)(null);e.ph.phFocus;let M=e.ph.phData;e.ph.phUser;let S=e.ph.phSource,[O,D]=(0,i.useState)("http://github.com/"),[P,N]=(0,i.useState)({}),[R,C]=(0,i.useState)([]),[I,w]=(0,i.useState)(null===(l=e.ph.phFocus)||void 0===l?void 0:null===(t=l.focusProj)||void 0===t?void 0:t.org),[F,k]=(0,i.useState)(null===(f=e.ph.phFocus)||void 0===f?void 0:null===(v=f.focusProj)||void 0===v?void 0:v.repo),[L,U]=(0,i.useState)(null===(A=e.ph.phFocus)||void 0===A?void 0:null===(b=A.focusProj)||void 0===b?void 0:b.path),[K,V]=(0,i.useState)(null===(E=e.ph.phFocus)||void 0===E?void 0:null===(j=E.focusProj)||void 0===j?void 0:j.branch),[H,Y]=(0,i.useState)([]),[G,B]=(0,i.useState)({}),[J,W]=(0,i.useState)([]),[$,X]=(0,i.useState)([]),[z,q]=(0,i.useState)(!1),[Q,Z]=(0,i.useState)(!1),[ee,et]=(0,i.useState)(!1),{buttonLabel:el,className:eo}=e,ei=()=>et(!ee),es={phData:e.ph.phData,phFocus:e.ph.phFocus,phUser:e.ph.phUser,phSource:""===S&&M.metis.name||S,lastUpdate:new Date().toISOString()},ea=e=>{(null==e?void 0:e.length)>0&&(w(e),D("http://github.com/".concat(e,"/").concat(F)))},en=e=>{e?k(e):k("")},ed=e=>{e?U(e):U("models")},er=e=>{ec("".concat(I,"/").concat(F),"".concat(e)),setTimeout(()=>{y(!x)},3e3)},ec=async(t,l)=>{var o,i,s,a,n,d,r,p,u,m,h;let v=null;q(!0);try{let e="https://raw.githubusercontent.com/".concat(t,"/").concat(K,"/").concat(L,"/").concat(l);"/"===L&&(e="https://raw.githubusercontent.com/".concat(t,"/").concat(K,"/").concat(l));let i=await c.A.get(e);if(null==i?void 0:null===(o=i.data)||void 0===o?void 0:o.content){let e=i.data.content,t=atob(e);v=JSON.parse(t)}else v=null==i?void 0:i.data}catch(e){console.error("Error loading impProjFile:",e)}finally{q(!1)}if(B(v),q(!1),null!=v){if(l.includes("_MM.json")){let t=null===(a=e.ph.phData)||void 0===a?void 0:null===(s=a.metis)||void 0===s?void 0:null===(i=s.metamodels)||void 0===i?void 0:i.findIndex(e=>null!=P&&e.id===(null==P?void 0:P.id)),l=null===(d=e.ph.phData)||void 0===d?void 0:null===(n=d.metis)||void 0===n?void 0:n.metamodels.length;t<0&&(t=l);let o={phData:{...e.ph.phData,metis:{...e.ph.phData.metis,metamodels:[...e.ph.phData.metis.metamodels.slice(0,t),P,...e.ph.phData.metis.metamodels.slice(t+1,e.ph.phData.metis.metamodels.length)],models:e.ph.phData.metis.models}}};o.phData&&g({type:"LOAD_TOSTORE_PHDATA",data:o.phData})}else if(l.includes("_MO.json")){let t=null===(u=e.ph.phData)||void 0===u?void 0:null===(p=u.metis)||void 0===p?void 0:null===(r=p.models)||void 0===r?void 0:r.findIndex(e=>null!=P&&e.id===(null==P?void 0:P.id)),l=null===(h=e.ph.phData)||void 0===h?void 0:null===(m=h.metis)||void 0===m?void 0:m.models.length;t<0&&(t=l);let o={phData:{...e.ph.phData,metis:{...e.ph.phData.metis,metamodels:e.ph.phData.metis.metamodels,models:[...e.ph.phData.metis.metamodels.slice(0,t),P,...e.ph.phData.metis.models.slice(t+1,e.ph.phData.metis.models.length)]}}};o.phData&&g({type:"LOAD_TOSTORE_PHDATA",data:o.phData})}else{let e={phData:{...v.phData,metis:{...v.phData.metis,name:v.phData.metis.name,description:v.phData.metis.description}},phFocus:{...v.phFocus,focusProj:{...v.phFocus.focusProj,org:I,repo:F,path:L,branch:K,username:I,filename:l}},phUser:v.phUser,phSource:v.phData.metis.name||v.phSource};e.phData&&g({type:"LOAD_TOSTORE_PHDATA",data:e.phData}),e.phFocus&&g({type:"LOAD_TOSTORE_PHFOCUS",data:e.phFocus}),e.phUser&&g({type:"LOAD_TOSTORE_PHUSER",data:e.phUser}),e.phSource&&g({type:"LOAD_TOSTORE_PHSOURCE",data:e.phSource})}}},ep=async(e,t)=>{var l;q(!0);let o=""!==t&&void 0!==t?"repos/".concat(e,"/").concat(F,"/contents/").concat(t):"repos/".concat(e,"/").concat(F,"/contents");if(o.includes("undefined"))return null;let i=o.replace(/\/\//g,"/"),s=await (0,m.j6)(i,t),a=await (null==s?void 0:null===(l=s.data)||void 0===l?void 0:l.filter(e=>e.name.endsWith(".json"))),n=[];(null==s?void 0:s.data)&&(n=s.data.filter(e=>"dir"===e.type)),X(n),W(a),void 0===t||""===t?D("https://github.com/".concat(I,"/").concat(F,"/tree/").concat(K,"/")):D("https://github.com/".concat(I,"/").concat(F,"/tree/").concat(K,"/").concat(t)),y(!x)};(0,i.useEffect)(()=>{var t,l,o,i,s,a,n,d;w(null===(l=e.ph.phFocus)||void 0===l?void 0:null===(t=l.focusProj)||void 0===t?void 0:t.org),k(null===(i=e.ph.phFocus)||void 0===i?void 0:null===(o=i.focusProj)||void 0===o?void 0:o.repo),void 0===L||""===L?U("/"):U(null===(d=e.ph.phFocus)||void 0===d?void 0:null===(n=d.focusProj)||void 0===n?void 0:n.path),V(null===(a=e.ph.phFocus)||void 0===a?void 0:null===(s=a.focusProj)||void 0===s?void 0:s.branch)},[]);let eu=null==J?void 0:J.map(e=>({value:e.name,label:e.name})),em=[{value:"",label:J.length>0?" Select Model - - - ":' - - - Click on "LIST MODELS" above! - - - '},...eu];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{className:"btn bg-transparent py-0 my-0 pe-2 ps-1",onClick:ei,children:[(0,o.jsx)("i",{className:"fab fa-github fa-lg my-0 py-0 me-1 "}),el]}),(0,o.jsxs)(s.A,{isOpen:ee,toggle:ei,className:eo,innerRef:T,backdropref:_,style:{zIndex:"9999"},children:[(0,o.jsxs)(a.A,{toggle:()=>{ei()},children:[(0,o.jsx)("i",{className:"fab fa-github fa-lg mx-2"}),"GitHub Model Repository"]}),(0,o.jsx)(n.A,{className:"p-1",children:(0,o.jsxs)("div",{className:"bg-light",children:[(0,o.jsxs)("div",{className:"bg-light square border py-2 border-2 border-success p-2 ",children:[(0,o.jsx)("strong",{children:"Download from a list of Models:"}),(0,o.jsxs)("div",{className:"d-flex w-100",children:[(0,o.jsx)(p,{label:"Repo owner :",value:I,onChange:e=>ea(e),placeholder:"Repo Owners Name "}),(0,o.jsx)("span",{children:""!==e.ph.path?(0,o.jsx)(p,{label:"Repository :",value:"kavca-akm-models",onChange:e=>en(e),placeholder:"Repo name "}):(0,o.jsx)(p,{label:"Repository :",value:F,onChange:e=>en(e),placeholder:"Repo name "})}),(0,o.jsx)("hr",{className:"bg-primary my-2 mx-4"}),(0,o.jsx)(p,{label:"Path :",value:e.ph.path,onChange:e=>ed(e),placeholder:"Path to models "}),Array.isArray($)&&0!==$.length?(0,o.jsxs)("div",{children:["Model paths (folders) found: ",(0,o.jsxs)("span",{className:"text-success m-1",children:[" ",null==$?void 0:$.map(e=>(0,o.jsxs)("li",{className:"px-1",children:[e.name,", "]},e.name))]})," "]}):!L&&(0,o.jsx)("div",{className:"text-warning min-vh-500",children:" 'No model paths (folders) found!'"})]}),(0,o.jsxs)(d.A,{className:"btn-secondary bg-secondary text-white border-dark mt-2 mb-2 pb- w-100",onClick:()=>ep(I,L),children:[(0,o.jsx)("i",{className:"fab fa-github fa-lg me-2"}),"List Models"]}),(null==J?void 0:J.length)>0?(0,o.jsxs)("div",{className:"",children:["Models found:",(0,o.jsxs)("span",{className:"text-success m-1 ",children:[null==J?void 0:J.map(e=>(0,o.jsxs)("li",{className:"px-2",children:[e.name,",   "]},e.name))," "]})]}):(0,o.jsx)("div",{className:"text-warning",children:" 'No models found!' "}),(0,o.jsx)("hr",{className:"bg-primary px-10 my-1 mx-4"}),(0,o.jsx)("label",{className:" d-inline-flex justify-content-left",children:(0,o.jsx)(u.A,{label:" Select model : ",value:em?em[0]:"no models",options:em||[],onChange:e=>er(e)})}),(0,o.jsx)("span",{className:"p-5",children:(0,o.jsx)(d.A,{className:"btn-primary modal--footer mr-4 py-0 ml-5 pl-5 float-end ",color:"primary","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click here when done!",onClick:()=>{ei(),y(!x)},children:"Done"})})]}),(0,o.jsx)("hr",{className:"bg-secondary py-0 my-1 mx-4"}),(0,o.jsxs)("div",{className:"bg-light square border border-2 border-primary p-2",children:[(0,o.jsx)("strong",{children:"Upload model files:"})," ",(0,o.jsx)("br",{}),(0,o.jsxs)("div",{className:"bg-light square border border-2 border-primary p-2",children:[(0,o.jsx)("strong",{children:"First save the project.json file:"}),(0,o.jsx)("button",{className:"btn-primary modal--footer ms-4 mr-2 py-0 px-1 float-end ",color:"primary","data-toggle":"tooltip","data-placement":"top","data-bs-html":"true",title:"Click here to Save the Project to file  (Default in Downloads folder)",onClick:function(){let t=e.ph.phData.metis.name;(0,h.gV)(es,t,"_PR")},children:"Save"}),(0,o.jsx)("hr",{className:"bg-secondary py-0 my-1 mx-0"}),(0,o.jsx)("a",{href:O,target:"_blank",rel:"noopener noreferrer",children:(0,o.jsx)("strong",{className:"text-primary",children:" Click here to open GitHub to upload the saved file to GitHub "})})," ",(0,o.jsx)("br",{}),"In GitHub: ",(0,o.jsx)("strong",{children:'Click "Add file" in upper right corner and then "Upload files" and select the file to upload.'}),(0,o.jsx)("br",{})," NB! Existing files must be uploaded with the same name. If necessary: Rename the file before uploading."]})]}),(0,o.jsx)("hr",{className:"bg-primary my-1 mx-0"})]})})]})]})}},9371:(e,t,l)=>{l.d(t,{A:()=>s});var o=l(7876),i=l(3679);let s=e=>{var t;return(0,o.jsxs)("div",{className:"footer d-flex align-items-center",children:[(0,o.jsx)(i.xxq,{className:"ms-2"}),(0,o.jsx)("div",{children:"AKM Modeller - 2024"}),(0,o.jsx)(i.PSO,{className:"ms-2"}),(0,o.jsx)("div",{className:"ms-1",children:"Kavca AS"}),(0,o.jsxs)("div",{className:"d-flex justify-content-between align-items-center ms-auto me-4",children:[(0,o.jsx)(i.mSE,{className:"me-1"}),(0,o.jsxs)("div",{children:["Template : ",e.phTemplate]}),(0,o.jsx)(i.ltS,{className:"ms-5 me-1"}),(0,o.jsx)("div",{children:e.phSource?(0,o.jsxs)("div",{children:["AKM file: ",e.phSource]}):(0,o.jsxs)("div",{children:["AKM file: ",null===(t=e.phFocus)||void 0===t?void 0:t.focusProj.filename," "]})})]})]})}}}]);