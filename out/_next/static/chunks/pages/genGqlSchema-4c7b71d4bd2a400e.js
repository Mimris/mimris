(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{522:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/genGqlSchema",function(){return s(8919)}])},8919:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return b}});var r=s(5893),n=s(1857),l=s.n(n),t=s(7294),i=s(4416),c=s(1871),d=s(8261),p=s(8287);let o=e=>{var a;let s=e.phData&&e.phData.metis,r=s&&s.models,n=s&&s.metamodels,l=e.phFocus.focusModel.id,t=r&&(null==r?void 0:r.find(e=>e&&e.id===l)),i=n&&(null==n?void 0:n.find(e=>e.id===(null==t?void 0:t.metamodelRef))),c=i&&'// "id" = "'+i.id+'", "name" = "'+i.name+'",\n export default `\n'+(i&&i.objecttypes&&(null===(a=i.objecttypes)||void 0===a?void 0:a.map(e=>{var a,s;return e&&"   type "+e.name.replace(/ /g,"_")+" { \n     id : String! \n     name : String! \n     "+(e&&e.properties?null===(a=e.properties)||void 0===a?void 0:a.map(e=>e&&e.name&&e.name.replace(/ /g,"_")+": String \n     "):"")+(i&&i.relshiptypes&&(null===(s=i.relshiptype)||void 0===s?void 0:s.map(a=>a&&a.fromobjtypeRef===e.id&&""+i.objecttypes.find(e=>e.id===a.toobjtypeRef).name.replace(/ /g,"_")+"s: ["+i.objecttypes.find(e=>e.id===a.toobjtypeRef).name.replace(/ /g,"_")+"] \n     "))+"   \n").replace(/ys:/,"ies:").replace(/sss:/,"sses:")+"   } \n"})))+"type Query { \n"+(i&&i.objecttypes&&i.objecttypes.map(e=>e&&("   all"+e.name.replace(/ /g,"_")+"s: ["+e.name.replace(/ /g,"_")+"] \n   get"+e.name.replace(/ /g,"_")+"(id: String!): "+e.name.replace(/ /g,"_")+" \n\n").replace(/ys:/,"ies:").replace(/sss:/,"sses:")))+"   } \ntype Mutation { \n"+(i&&i.objecttypes&&i.objecttypes.map(e=>e&&"   create"+e.name.replace(/ /g,"_")+"(id: String!): "+e.name.replace(/ /g,"_")+" \n   update"+e.name.replace(/ /g,"_")+"(id: String!, newId: String!): String \n   delete"+e.name.replace(/ /g,"_")+"(id: String!): String \n\n"))+"   }\n`; \n\n\n",d=i&&"export default { \n  Query: { \n"+(i&&i.objecttypes&&i.objecttypes.map(e=>e&&("   all"+e.name.replace(/ /g,"_")+'s: (parent:any@comma args:any@comma { models }:any) => { \n       const objs = models.type("'+e.name.replace(/ /g,"_")+'") \n       return objs \n   }@comma \n').replace(/ys:/,"ies:").replace(/sss:/,"sses:")))+"  }@comma \n  Mutation: { \n  } \n} \n",p=null==c?void 0:c.replace(/,/g,"").replace(/false/g,"").replace(/@comma/g,","),o=null==d?void 0:d.replace(/,/g,"").replace(/false/g,"").replace(/@comma/g,","),x={gql:{id:null==i?void 0:i.id,name:null==i?void 0:i.name,typeDefs:p,resolvers:o}};return fetch("/api/gqlschema/current",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),x.name};var x=s(2013);let m=e=>{var a;(0,i.I0)();let[s,n]=(0,t.useState)(!1),c=e.phFocus&&(0,r.jsx)(p.Z,{phF:e.phFocus}),m=(0,i.v9)(e=>e),[b,g]=(0,t.useState)(!1),f=(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{className:"btn-default bg-light btn-sm btn-block",onClick:function(){g(!b)},children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{style:{paddingLeft:"5px"},children:" Tasks - Help"})," ",(0,r.jsx)("span",{style:{float:"left"},children:" <  "})]}):(0,r.jsxs)("div",{className:"btn-vertical m-0 p-0",style:{maxWidth:"6px",paddingLeft:"0px"},children:[(0,r.jsx)("span",{children:" > "}),(0,r.jsx)("span",{children:" T a s k s - H e l p"})," "]})}),(0,r.jsx)("div",{className:"toggleTasks",children:b?(0,r.jsx)(x.Z,{}):(0,r.jsx)("span",{})})]});async function u(){await o(m)}let j=(0,r.jsx)("a",{href:"/gql/schemas/typeDefs.ts",download:!0,children:"typeDefs.ts"}),h=(0,r.jsx)("a",{href:"/gql/schemas/resolvers.ts",download:!0,children:"resolvers.ts"}),y=m&&(0,r.jsx)("button",{className:"btn btn-info",onClick:u,children:" Generate GraphQl Schema and Resolver"});return(0,r.jsxs)("div",{className:"jsx-301bb25903f1ce39",children:[(0,r.jsx)(d.Z,{user:null===(a=m.phUser)||void 0===a?void 0:a.focusUser,children:(0,r.jsx)("div",{id:"index",className:"jsx-301bb25903f1ce39",children:(0,r.jsx)("div",{className:"jsx-301bb25903f1ce39 wrapper",children:(0,r.jsxs)("div",{className:"jsx-301bb25903f1ce39 workplace",children:[(0,r.jsx)("div",{className:"jsx-301bb25903f1ce39 contextarea",children:c}),(0,r.jsx)("div",{className:"jsx-301bb25903f1ce39 tasksarea",children:f}),(0,r.jsxs)("div",{className:"jsx-301bb25903f1ce39 workarea bg-light p-4",children:[(0,r.jsx)("a",{className:"jsx-301bb25903f1ce39",children:"Click on the button to genereate graphql schema: (typedefs and resolvers) from current Metamodel"}),(0,r.jsx)("br",{className:"jsx-301bb25903f1ce39"}),(0,r.jsxs)("div",{style:{paddingTop:"4px"},className:"jsx-301bb25903f1ce39 genschema",children:[y,(0,r.jsx)("hr",{className:"jsx-301bb25903f1ce39"}),(0,r.jsx)("a",{className:"jsx-301bb25903f1ce39",children:"Click on link to download the generated files. (Can be renamed to .js files)"}),(0,r.jsxs)("ul",{className:"jsx-301bb25903f1ce39",children:[(0,r.jsx)("li",{className:"jsx-301bb25903f1ce39",children:j}),(0,r.jsx)("li",{className:"jsx-301bb25903f1ce39",children:h})]})]})]})]})})})}),(0,r.jsx)(l(),{id:"301bb25903f1ce39",children:'.wrapper.jsx-301bb25903f1ce39{display:grid;grid-template-columns:auto;grid-gap:0px;grid-template-areas:"workplace"}.workplace.jsx-301bb25903f1ce39{grid-area:workplace;display:grid;background-color:#;grid-template-columns:auto 2fr;grid-template-areas:"contextarea contextarea""tasksarea workarea"}.workarea.jsx-301bb25903f1ce39{grid-area:workarea;display:grid;-webkit-border-radius:5px 5px 0px 0px;-moz-border-radius:5px 5px 0px 0px;border-radius:5px 5px 0px 0px;grid-template-areas:"workpad workpad"}.contextarea.jsx-301bb25903f1ce39{grid-area:contextarea;display:grid;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;outline-offset:-6px;padding:0px;font-size:70%;background-color:#e8e8e8;color:#000;max-height:60px}.tasksarea.jsx-301bb25903f1ce39{grid-area:tasksarea;padding:2px;border:2px;max-width:200px;width:100%;-webkit-border-radius:5px 5px 5px 5px;-moz-border-radius:5px 5px 5px 5px;border-radius:5px 5px 5px 5px;border-color:#000;background-color:#fff;font-size:100%}'})]})};var b=(0,c.Z)((0,i.$j)(e=>e)(m))}},function(e){e.O(0,[445,895,692,880,945,13,774,888,179],function(){return e(e.s=522)}),_N_E=e.O()}]);